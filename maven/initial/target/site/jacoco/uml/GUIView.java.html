<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>GUIView.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">2022sp-420-AlarmSquad</a> &gt; <a href="index.source.html" class="el_package">uml</a> &gt; <span class="el_source">GUIView.java</span></div><h1>GUIView.java</h1><pre class="source lang-java linenums">package uml;

import javafx.application.Application;
import javafx.beans.InvalidationListener;
import javafx.beans.binding.DoubleBinding;
import javafx.beans.value.ObservableNumberValue;
import javafx.collections.ObservableList;
import javafx.geometry.Insets;
import javafx.scene.Group;
import javafx.scene.Node;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.control.Label;
import javafx.scene.control.Menu;
import javafx.scene.control.MenuBar;
import javafx.scene.control.MenuItem;
import javafx.scene.control.TextField;
import javafx.scene.input.ScrollEvent;
import javafx.scene.layout.GridPane;
import javafx.scene.layout.VBox;
import javafx.scene.paint.Color;
import javafx.scene.shape.*;
import javafx.scene.text.Text;
import javafx.scene.transform.Scale;
import javafx.stage.FileChooser;
import javafx.stage.Modality;
import javafx.stage.Stage;

import java.awt.*;
import java.awt.font.FontRenderContext;
import java.awt.geom.AffineTransform;
import java.beans.EventHandler;
import java.io.File;
import java.util.ArrayList;
import java.util.List;

<span class="nc bnc" id="L37" title="All 2 branches missed.">@SuppressWarnings(&quot;DanglingJavadoc&quot;)</span>
/**
 * Creates the GUI environment for the user when using the GUI version of the diagram
 *
 * @author AlarmSquad
 */
public class GUIView extends Application {

    // create the menu bar
<span class="nc" id="L46">    private MenuBar menuBar = new MenuBar();</span>
    // initialize the root
<span class="nc" id="L48">    private Group superRoot = new Group();</span>
    // diagram width and height for window
<span class="nc" id="L50">    private double diagram_width = 950;</span>
<span class="nc" id="L51">    private double diagram_height = 640;</span>
    // coordinates for draging objects
    private double startDragX;
    private double startDragY;
    // class box and relationship line lists
<span class="nc" id="L56">    private ArrayList&lt;ClassBox&gt; classBoxList = new ArrayList&lt;&gt;();</span>
<span class="nc" id="L57">    private ArrayList&lt;RelLine&gt; lineList = new ArrayList&lt;&gt;();</span>
<span class="nc" id="L58">    private ArrayList&lt;ArrayList&lt;Line&gt;&gt; arrowList = new ArrayList&lt;&gt;();</span>
<span class="nc" id="L59">    private AffineTransform affineTransform = new AffineTransform();</span>
<span class="nc" id="L60">    private FontRenderContext frc = new FontRenderContext(affineTransform, true, true);</span>
<span class="nc" id="L61">    private Font font = new Font(&quot;Arial&quot;, Font.PLAIN, 12);</span>
    private GUIController controller;
    private UMLModel model;

<span class="nc" id="L65">    public GUIView(UMLModel model) {</span>
<span class="nc" id="L66">        this.controller = new GUIController(this, model);</span>
<span class="nc" id="L67">        this.model = model;</span>
<span class="nc" id="L68">    }</span>

<span class="nc" id="L70">    public GUIView() {</span>
<span class="nc" id="L71">        this.model = new UMLModel();</span>
<span class="nc" id="L72">        controller = new GUIController(this, model);</span>
<span class="nc" id="L73">    }</span>

    /**
     * Starts the initial window for the diagram
     *
     * @param stage the stage of the diagram
     */
    @Override
    public void start(Stage stage) {
        // add the menu to the root
<span class="nc" id="L83">        superRoot.getChildren().add(createDiagramMenu());</span>
        // initialize the window, and set the color
<span class="nc" id="L85">        Scene window = new Scene(superRoot, Color.DIMGRAY);</span>
        // set the title, height, and width of the window
<span class="nc" id="L87">        stage.setTitle(&quot;UML Editor&quot;);</span>
<span class="nc" id="L88">        stage.setWidth(diagram_width);</span>
<span class="nc" id="L89">        stage.setHeight(diagram_height);</span>
<span class="nc" id="L90">        stage.setResizable(true);</span>
        // set the stage and show it
<span class="nc" id="L92">        stage.setScene(window);</span>
<span class="nc" id="L93">        stage.setAlwaysOnTop(false);</span>
<span class="nc" id="L94">        this.menuBar.prefWidthProperty().bind(stage.widthProperty());</span>
        // constantly updates the width of the stage whenever the window is resized
<span class="nc" id="L96">        stage.widthProperty().addListener((observableValue, oldWidth, newWidth) -&gt; {</span>
<span class="nc" id="L97">            stage.setWidth(newWidth.doubleValue());</span>
<span class="nc" id="L98">            diagram_width = stage.getWidth();</span>
<span class="nc" id="L99">        });</span>
        // constantly updates the height of the stage whenever the window is resized
<span class="nc" id="L101">        stage.heightProperty().addListener((observableValue, oldWidth, newHeight) -&gt; {</span>
<span class="nc" id="L102">            stage.setHeight(newHeight.doubleValue());</span>
<span class="nc" id="L103">            diagram_height = stage.getHeight();</span>
<span class="nc" id="L104">        });</span>
<span class="nc" id="L105">        stage.show();</span>

<span class="nc" id="L107">        superRoot.setOnScroll(event -&gt; {</span>
<span class="nc bnc" id="L108" title="All 2 branches missed.">            if(event.getDeltaY() &lt; 0) {</span>
<span class="nc" id="L109">                Scale scale1 = new Scale(.99,.99);</span>
<span class="nc bnc" id="L110" title="All 2 branches missed.">                for(ClassBox box : classBoxList){</span>
<span class="nc" id="L111">                    box.getClassPane().getTransforms().add(scale1);</span>
<span class="nc" id="L112">                }</span>
<span class="nc" id="L113">            }</span>
            else{
<span class="nc" id="L115">                Scale scale2 = new Scale(1.01,1.01);</span>
<span class="nc bnc" id="L116" title="All 2 branches missed.">                for(ClassBox box : classBoxList){</span>
<span class="nc" id="L117">                    box.getClassPane().getTransforms().add(scale2);</span>
<span class="nc" id="L118">                }</span>
            }
<span class="nc" id="L120">        });</span>
<span class="nc" id="L121">    }</span>

    public Group getSuperRoot() {
<span class="nc" id="L124">        return superRoot;</span>
    }

    public ArrayList&lt;ArrayList&lt;Line&gt;&gt; getArrowList() {
<span class="nc" id="L128">        return arrowList;</span>
    }

    public ArrayList&lt;RelLine&gt; getLineList() {
<span class="nc" id="L132">        return lineList;</span>
    }

    public ArrayList&lt;ClassBox&gt; getClassBoxList() {
<span class="nc" id="L136">        return classBoxList;</span>
    }

    /**
     * Creates the menu bar at the top of the screen, and gives the menu options functionality
     *
     * @return a VBox which encapsulates the menu
     */
    private VBox createDiagramMenu() {
        // create the file menu and its menu items
<span class="nc" id="L146">        Menu file = new Menu(&quot;File&quot;);</span>
<span class="nc" id="L147">        MenuItem saveAsFile = new MenuItem(&quot;Save as File&quot;);</span>
        // if the save button is pressed, open a new window to save
<span class="nc" id="L149">        saveAsFile.setOnAction(event -&gt; saveFileWindow());</span>
<span class="nc" id="L150">        MenuItem saveAsImage = new MenuItem(&quot;Save as Image&quot;);</span>
        // if the save as image button is pressed, save the diagram to an image
<span class="nc" id="L152">        saveAsImage.setOnAction(event -&gt; {</span>
<span class="nc bnc" id="L153" title="All 2 branches missed.">            if (classBoxList.isEmpty()) {</span>
<span class="nc" id="L154">                popUpWindow(&quot;Error&quot;, &quot;There is nothing to display in the image.&quot;);</span>
            } else {
<span class="nc" id="L156">                saveImageWindow();</span>
            }
<span class="nc" id="L158">        });</span>
<span class="nc" id="L159">        MenuItem load = new MenuItem(&quot;Load&quot;);</span>
        // if the load button is pressed, open a new window to load
<span class="nc" id="L161">        load.setOnAction(event -&gt; loadWindow());</span>
<span class="nc" id="L162">        file.getItems().addAll(load, saveAsFile, saveAsImage);</span>

        //***************************************//
        //********** Add Menu Items *************//
        //***************************************//

        // create the add menu and its menu items
<span class="nc" id="L169">        Menu add = new Menu(&quot;Add&quot;);</span>
<span class="nc" id="L170">        MenuItem addClass = new MenuItem(&quot;Add Class&quot;);</span>
        // if the add class button is pressed, open a new window to add class
<span class="nc" id="L172">        addClass.setOnAction(event -&gt; addClassWindow());</span>
        // create the add attribute menu and its menu items
<span class="nc" id="L174">        Menu addAttribute = new Menu(&quot;Add Attribute&quot;);</span>
        // if the add field button is pressed, open a new window to add field
<span class="nc" id="L176">        MenuItem addField = new MenuItem(&quot;Add Field&quot;);</span>
<span class="nc" id="L177">        addField.setOnAction(event -&gt; addFieldWindow());</span>
        // if the add method button is pressed, open a new window to add method
<span class="nc" id="L179">        MenuItem addMethod = new MenuItem(&quot;Add Method&quot;);</span>
<span class="nc" id="L180">        addMethod.setOnAction(event -&gt; addMethodWindow());</span>
<span class="nc" id="L181">        addAttribute.getItems().addAll(addField, addMethod);</span>
        // if the add relationship button is pressed, open a new window to add relationship
<span class="nc" id="L183">        MenuItem addRel = new MenuItem(&quot;Add Relationship&quot;);</span>
<span class="nc" id="L184">        addRel.setOnAction(event -&gt; addRelWindow());</span>
        // if the add parameter button is pressed, open a new window to add parameter
<span class="nc" id="L186">        MenuItem addParam = new MenuItem(&quot;Add Parameter(s)&quot;);</span>
<span class="nc" id="L187">        addParam.setOnAction(event -&gt; addParameterWindow());</span>
<span class="nc" id="L188">        add.getItems().addAll(addClass, addAttribute, addRel, addParam);</span>

        //***************************************//
        //********** Delete Menu Items **********//
        //***************************************//

        // create the delete menu and its menu items
<span class="nc" id="L195">        Menu delete = new Menu(&quot;Delete&quot;);</span>
        // Menu item for deleting a class, when clicked, launch delete class window
<span class="nc" id="L197">        MenuItem deleteClass = new MenuItem(&quot;Delete Class&quot;);</span>
<span class="nc" id="L198">        deleteClass.setOnAction(event -&gt; deleteClassWindow());</span>
        // create the delete attribute menu and its menu items
<span class="nc" id="L200">        Menu deleteAttribute = new Menu(&quot;Delete Attribute&quot;);</span>
        // if the delete field button is pressed, open a new window to delete field
<span class="nc" id="L202">        MenuItem deleteField = new MenuItem(&quot;Delete Field&quot;);</span>
<span class="nc" id="L203">        deleteField.setOnAction(event -&gt; deleteFieldWindow());</span>
        // if the delete method button is pressed, open a new window to delete method
<span class="nc" id="L205">        MenuItem deleteMethod = new MenuItem(&quot;Delete Method&quot;);</span>
<span class="nc" id="L206">        deleteMethod.setOnAction(event -&gt; deleteMethodWindow());</span>
        // if the delete method button is pressed, open a new window to delete method
<span class="nc" id="L208">        MenuItem deleteParam = new MenuItem(&quot;Delete Parameter(s)&quot;);</span>
<span class="nc" id="L209">        deleteParam.setOnAction(event -&gt; deleteParameterWindow());</span>
<span class="nc" id="L210">        deleteAttribute.getItems().addAll(deleteField, deleteMethod);</span>
        // Menu item for deleting a relationship,
        // when clicked, launch delete relationship window
<span class="nc" id="L213">        MenuItem deleteRel = new MenuItem(&quot;Delete Relationship&quot;);</span>
<span class="nc" id="L214">        deleteRel.setOnAction(event -&gt; deleteRelWindow());</span>
<span class="nc" id="L215">        delete.getItems().addAll(deleteClass, deleteAttribute, deleteRel, deleteParam);</span>

        //***************************************//
        //******* Rename/Change Menu Items ******//
        //***************************************//

        // create the rename menu and its menu items
<span class="nc" id="L222">        Menu rename = new Menu(&quot;Rename&quot;);</span>
<span class="nc" id="L223">        MenuItem renameClass = new MenuItem(&quot;Rename Class&quot;);</span>
        // if the rename class button is pressed, open a new window to rename class
<span class="nc" id="L225">        renameClass.setOnAction(event -&gt; renameClassWindow());</span>
        // create the rename attribute menu and its menu items
<span class="nc" id="L227">        Menu renameAttribute = new Menu(&quot;Rename Attribute&quot;);</span>
        // if the rename field button is pressed, open a new window to rename field
<span class="nc" id="L229">        MenuItem renameField = new MenuItem(&quot;Rename Field&quot;);</span>
<span class="nc" id="L230">        renameField.setOnAction(event -&gt; renameFieldWindow());</span>
        // if the rename method button is pressed, open a new window to rename method
<span class="nc" id="L232">        MenuItem renameMethod = new MenuItem(&quot;Rename Method&quot;);</span>
<span class="nc" id="L233">        renameMethod.setOnAction(event -&gt; renameMethodWindow());</span>
<span class="nc" id="L234">        renameAttribute.getItems().addAll(renameField, renameMethod);</span>
        // adds all the rename menu items to rename option
<span class="nc" id="L236">        rename.getItems().addAll(renameClass, renameAttribute);</span>
<span class="nc" id="L237">        Menu change = new Menu(&quot;Change&quot;);</span>
        // open new window for changing a parameter when the option is pressed
<span class="nc" id="L239">        MenuItem changeParam = new MenuItem(&quot;Change Parameter(s)&quot;);</span>
<span class="nc" id="L240">        changeParam.setOnAction(event -&gt; changeParamWindow());</span>
        // open new window for changing the relType when the option is pressed
<span class="nc" id="L242">        MenuItem changeRelType = new MenuItem(&quot;Change Relationship Type&quot;);</span>
<span class="nc" id="L243">        changeRelType.setOnAction(event -&gt; changeRelTypeWindow());</span>
        // all of the change options as part of the edit menu
<span class="nc" id="L245">        change.getItems().addAll(changeParam, changeRelType);</span>

        // undoes the most recent action
<span class="nc" id="L248">        MenuItem undo = new MenuItem(&quot;Undo&quot;);</span>
<span class="nc" id="L249">        undo.setOnAction(event -&gt; controller.undoAction());</span>
        // redoes the most recent undo
<span class="nc" id="L251">        MenuItem redo = new MenuItem(&quot;Redo&quot;);</span>
<span class="nc" id="L252">        redo.setOnAction(event -&gt; controller.redoAction());</span>

        // create the edit menu and add the 'add', 'delete', and 'rename' menus to it
<span class="nc" id="L255">        Menu edit = new Menu(&quot;Edit&quot;);</span>
        // all of the options that are part of the edit menu
<span class="nc" id="L257">        edit.getItems().addAll(add, delete, rename, change, undo, redo);</span>
        // create the help menu and its menu item
<span class="nc" id="L259">        Menu help = new Menu(&quot;Help&quot;);</span>
<span class="nc" id="L260">        MenuItem showCommands = new MenuItem(&quot;Show Commands&quot;);</span>
<span class="nc" id="L261">        showCommands.setOnAction(event -&gt; showCommandsWindow());</span>
<span class="nc" id="L262">        help.getItems().add(showCommands);</span>
        // adds all menus to the menu bar
<span class="nc" id="L264">        menuBar.getMenus().addAll(file, edit, help);</span>
        // disable all menu items that cannot be used until updateMenu is called
<span class="nc" id="L266">        addField.setDisable(true);</span>
<span class="nc" id="L267">        addMethod.setDisable(true);</span>
<span class="nc" id="L268">        addRel.setDisable(true);</span>
<span class="nc" id="L269">        addParam.setDisable(true);</span>
<span class="nc" id="L270">        deleteClass.setDisable(true);</span>
<span class="nc" id="L271">        deleteField.setDisable(true);</span>
<span class="nc" id="L272">        deleteMethod.setDisable(true);</span>
<span class="nc" id="L273">        deleteRel.setDisable(true);</span>
<span class="nc" id="L274">        deleteParam.setDisable(true);</span>
<span class="nc" id="L275">        renameClass.setDisable(true);</span>
<span class="nc" id="L276">        renameField.setDisable(true);</span>
<span class="nc" id="L277">        renameMethod.setDisable(true);</span>
<span class="nc" id="L278">        changeParam.setDisable(true);</span>
<span class="nc" id="L279">        changeRelType.setDisable(true);</span>
        // return the vbox using the menu bar
<span class="nc" id="L281">        return new VBox(menuBar);</span>
    }

    /******************************************************************
     *
     * Start of window methods
     *
     ******************************************************************/

    /**
     * Creates a window for the save file method and its data
     */
    private void saveFileWindow() {
<span class="nc" id="L294">        Stage stage = new Stage();</span>
        // create a file chooser and set the text to represent the right file
<span class="nc" id="L296">        FileChooser fileChooser = new FileChooser();</span>
<span class="nc" id="L297">        fileChooser.setTitle(&quot;Save as File&quot;);</span>
<span class="nc" id="L298">        fileChooser.getExtensionFilters().addAll(new FileChooser.ExtensionFilter(&quot;JSON Files&quot;, &quot;*.json&quot;));</span>
        // get the selected file
<span class="nc" id="L300">        File file = fileChooser.showSaveDialog(stage);</span>
        // if the file is not null, run the save action method
<span class="nc bnc" id="L302" title="All 2 branches missed.">        if (file != null) {</span>
<span class="nc" id="L303">            this.controller.saveFileAction(file, stage);</span>
        }
<span class="nc" id="L305">    }</span>

    /**
     * Creates a window for the save image method and its data
     */
    private void saveImageWindow() {
<span class="nc" id="L311">        Stage stage = new Stage();</span>
        // create a file chooser and set the text to represent the right file
<span class="nc" id="L313">        FileChooser fileChooser = new FileChooser();</span>
<span class="nc" id="L314">        fileChooser.setTitle(&quot;Save as Image&quot;);</span>
<span class="nc" id="L315">        fileChooser.getExtensionFilters().addAll(new FileChooser.ExtensionFilter(&quot;JPG Files&quot;, &quot;*.jpg&quot;));</span>
        // get the selected file
<span class="nc" id="L317">        File file = fileChooser.showSaveDialog(stage);</span>
        // if the file is not null, run the save action method
<span class="nc bnc" id="L319" title="All 2 branches missed.">        if (file != null) {</span>
<span class="nc" id="L320">            this.controller.saveImageAction(file, stage, superRoot, diagram_width, diagram_height);</span>
        }

<span class="nc" id="L323">    }</span>

    /**
     * Creates a window for the load method and its data
     */
    private void loadWindow() {
<span class="nc" id="L329">        Stage stage = new Stage();</span>
        // create a file chooser
<span class="nc" id="L331">        FileChooser fileChooser = new FileChooser();</span>
        // get the selected file
<span class="nc" id="L333">        File file = fileChooser.showOpenDialog(stage);</span>
        // if the file is not null, run the load action method and update the menus
<span class="nc bnc" id="L335" title="All 2 branches missed.">        if (file != null) {</span>
<span class="nc" id="L336">            this.controller.loadAction(file, stage);</span>
<span class="nc" id="L337">            updateMenus();</span>
        }
<span class="nc" id="L339">    }</span>

    /**
     * Creates a window for the add class method and its data
     */
    private void addClassWindow() {
        // initialize the stage and root
<span class="nc" id="L346">        Stage stage = new Stage();</span>
<span class="nc" id="L347">        Group root = new Group();</span>
<span class="nc" id="L348">        stage.setAlwaysOnTop(true);</span>
        // create a label for the text box
<span class="nc" id="L350">        Label label = new Label(&quot;Class name: &quot;);</span>
        // create the text box for user input
<span class="nc" id="L352">        TextField text = new TextField();</span>
<span class="nc" id="L353">        text.setPrefColumnCount(16);</span>
        // create a button to add the class with the inputted name
<span class="nc" id="L355">        Button add = new Button(&quot;Add&quot;);</span>
<span class="nc" id="L356">        add.setOnAction(event -&gt; {</span>
<span class="nc" id="L357">            this.controller.addClassAction(text.getText(), stage);</span>
<span class="nc" id="L358">            updateMenus();</span>
<span class="nc" id="L359">        });</span>
        // create a button to cancel out of the window and enable menu again
<span class="nc" id="L361">        Button cancel = new Button(&quot;Cancel&quot;);</span>
<span class="nc" id="L362">        cancel.setOnAction(event -&gt; this.controller.exitAction(stage));</span>
        // create the pane for the objects and add them all
<span class="nc" id="L364">        GridPane pane = new GridPane();</span>
<span class="nc" id="L365">        pane.add(label, 0, 0);</span>
<span class="nc" id="L366">        pane.add(text, 1, 0);</span>
<span class="nc" id="L367">        pane.add(add, 0, 1);</span>
<span class="nc" id="L368">        pane.add(cancel, 1, 1);</span>
        // finalize the window with standard formatting
<span class="nc" id="L370">        finalizeWindow(stage, root, pane, &quot;Add Class&quot;, 120, 300);</span>
<span class="nc" id="L371">    }</span>

    /**
     * Creates a window for the add field method and its data
     */
    private void addFieldWindow() {
        // initialize the stage and root
<span class="nc" id="L378">        Stage stage = new Stage();</span>
<span class="nc" id="L379">        Group root = new Group();</span>
<span class="nc" id="L380">        stage.setAlwaysOnTop(true);</span>
        // create a label for the text box for the class
<span class="nc" id="L382">        Label classNameText = new Label(&quot;Class name: &quot;);</span>
        // create a label for the text box for the field name
<span class="nc" id="L384">        Label fieldNameText = new Label(&quot;Field name: &quot;);</span>
        // create a label for the text box for the field type
<span class="nc" id="L386">        Label fieldTypeText = new Label(&quot;Field type: &quot;);</span>
        // create the text box for the class name
<span class="nc" id="L388">        TextField className = new TextField();</span>
<span class="nc" id="L389">        className.setPrefColumnCount(16);</span>
        // create the text box for the field name
<span class="nc" id="L391">        TextField fieldName = new TextField();</span>
<span class="nc" id="L392">        fieldName.setPrefColumnCount(16);</span>
        // create the text box for the field type
<span class="nc" id="L394">        TextField fieldType = new TextField();</span>
<span class="nc" id="L395">        fieldType.setPrefColumnCount(16);</span>
        // create a button to add the field with the inputted name
<span class="nc" id="L397">        Button add = new Button(&quot;Add&quot;);</span>
<span class="nc" id="L398">        add.setOnAction(event -&gt; {</span>
<span class="nc" id="L399">            this.controller.addFieldAction(className.getText(), fieldName.getText(), fieldType.getText(), stage);</span>
<span class="nc" id="L400">            updateMenus();</span>
<span class="nc" id="L401">        });</span>
        // create a button to cancel out of the window and enable menu again
<span class="nc" id="L403">        Button cancel = new Button(&quot;Cancel&quot;);</span>
<span class="nc" id="L404">        cancel.setOnAction(event -&gt; this.controller.exitAction(stage));</span>
        // create the pane for the objects and add them all
<span class="nc" id="L406">        GridPane pane = new GridPane();</span>
<span class="nc" id="L407">        pane.add(classNameText, 0, 0);</span>
<span class="nc" id="L408">        pane.add(fieldNameText, 0, 1);</span>
<span class="nc" id="L409">        pane.add(fieldTypeText, 0, 2);</span>
<span class="nc" id="L410">        pane.add(className, 1, 0);</span>
<span class="nc" id="L411">        pane.add(fieldName, 1, 1);</span>
<span class="nc" id="L412">        pane.add(fieldType, 1, 2);</span>
<span class="nc" id="L413">        pane.add(add, 0, 3);</span>
<span class="nc" id="L414">        pane.add(cancel, 1, 3);</span>
        // finalize the window with standard formatting
<span class="nc" id="L416">        finalizeWindow(stage, root, pane, &quot;Add Field&quot;, 190, 300);</span>
<span class="nc" id="L417">    }</span>

    /**
     * Creates a window for the add method method and its data
     */
    private void addMethodWindow() {
        // initialize the stage and root
<span class="nc" id="L424">        Stage stage = new Stage();</span>
<span class="nc" id="L425">        Group root = new Group();</span>
<span class="nc" id="L426">        stage.setAlwaysOnTop(true);</span>
        // create a label for the text box for the class
<span class="nc" id="L428">        Label classNameText = new Label(&quot;Class name: &quot;);</span>
        // create a label for the text box for the method name
<span class="nc" id="L430">        Label methodNameText = new Label(&quot;Method name: &quot;);</span>
        // create a label for the text box for the return type
<span class="nc" id="L432">        Label returnTypeText = new Label(&quot;Return type: &quot;);</span>
        // create the text box for the class name
<span class="nc" id="L434">        TextField className = new TextField();</span>
<span class="nc" id="L435">        className.setPrefColumnCount(14);</span>
        // create the text box for the method name
<span class="nc" id="L437">        TextField methodName = new TextField();</span>
<span class="nc" id="L438">        methodName.setPrefColumnCount(14);</span>
        // create the text box for the return type
<span class="nc" id="L440">        TextField returnType = new TextField();</span>
<span class="nc" id="L441">        returnType.setPrefColumnCount(14);</span>
        // create a button to add the method with the inputted name
<span class="nc" id="L443">        Button add = new Button(&quot;Add&quot;);</span>
<span class="nc" id="L444">        add.setOnAction(event -&gt; {</span>
<span class="nc" id="L445">            this.controller.addMethodAction(className.getText(), methodName.getText(), returnType.getText(), stage);</span>
<span class="nc" id="L446">            updateMenus();</span>
<span class="nc" id="L447">        });</span>
        // create a button to cancel out of the window and enable menu again
<span class="nc" id="L449">        Button cancel = new Button(&quot;Cancel&quot;);</span>
<span class="nc" id="L450">        cancel.setOnAction(event -&gt; this.controller.exitAction(stage));</span>
        // create the pane for the objects and add them all
<span class="nc" id="L452">        GridPane pane = new GridPane();</span>
<span class="nc" id="L453">        pane.add(classNameText, 0, 0);</span>
<span class="nc" id="L454">        pane.add(methodNameText, 0, 1);</span>
<span class="nc" id="L455">        pane.add(returnTypeText, 0, 2);</span>
<span class="nc" id="L456">        pane.add(className, 1, 0);</span>
<span class="nc" id="L457">        pane.add(methodName, 1, 1);</span>
<span class="nc" id="L458">        pane.add(returnType, 1, 2);</span>
<span class="nc" id="L459">        pane.add(add, 0, 3);</span>
<span class="nc" id="L460">        pane.add(cancel, 1, 3);</span>
        // finalize the window with standard formatting
<span class="nc" id="L462">        finalizeWindow(stage, root, pane, &quot;Add Method&quot;, 190, 300);</span>
<span class="nc" id="L463">    }</span>

    /**
     * Creates a window for the add relationship method and its data
     */
    private void addRelWindow() {
        // initialize the stage and root
<span class="nc" id="L470">        Stage stage = new Stage();</span>
<span class="nc" id="L471">        Group root = new Group();</span>
<span class="nc" id="L472">        stage.setAlwaysOnTop(true);</span>
        // create a label for the text box for the source class name
<span class="nc" id="L474">        Label srcNameText = new Label(&quot;Source: &quot;);</span>
        // create a label for the text box for the destination class name
<span class="nc" id="L476">        Label destNameText = new Label(&quot;Destination: &quot;);</span>
        // create a label for the text box for the relationship type
<span class="nc" id="L478">        Label relTypeText = new Label(&quot;Relationship type: &quot;);</span>
        // create the text box for the source class name
<span class="nc" id="L480">        TextField srcName = new TextField();</span>
<span class="nc" id="L481">        srcName.setPrefColumnCount(13);</span>
        // create the text box for the destination class name
<span class="nc" id="L483">        TextField destName = new TextField();</span>
<span class="nc" id="L484">        destName.setPrefColumnCount(13);</span>
        // create the text box for the type of relationship
<span class="nc" id="L486">        TextField relType = new TextField();</span>
<span class="nc" id="L487">        relType.setPrefColumnCount(13);</span>
        // create a button to add the relationship with the correct src and dest names
<span class="nc" id="L489">        Button add = new Button(&quot;Add&quot;);</span>
<span class="nc" id="L490">        add.setOnAction(event -&gt; {</span>
<span class="nc" id="L491">            this.controller.addRelationshipAction(srcName.getText(),</span>
<span class="nc" id="L492">                    destName.getText(), relType.getText(), stage);</span>
<span class="nc" id="L493">            updateMenus();</span>
<span class="nc" id="L494">        });</span>
        // create a button to cancel out of the window and enable menu again
<span class="nc" id="L496">        Button cancel = new Button(&quot;Cancel&quot;);</span>
<span class="nc" id="L497">        cancel.setOnAction(event -&gt; this.controller.exitAction(stage));</span>
        // create the pane for the objects and add them all
<span class="nc" id="L499">        GridPane pane = new GridPane();</span>
<span class="nc" id="L500">        pane.add(srcNameText, 0, 0);</span>
<span class="nc" id="L501">        pane.add(destNameText, 0, 1);</span>
<span class="nc" id="L502">        pane.add(relTypeText, 0, 2);</span>
<span class="nc" id="L503">        pane.add(srcName, 1, 0);</span>
<span class="nc" id="L504">        pane.add(destName, 1, 1);</span>
<span class="nc" id="L505">        pane.add(relType, 1, 2);</span>
<span class="nc" id="L506">        pane.add(add, 0, 3);</span>
<span class="nc" id="L507">        pane.add(cancel, 1, 3);</span>
        // finalize the window with standard formatting
<span class="nc" id="L509">        finalizeWindow(stage, root, pane, &quot;Add Relationship&quot;, 190, 300);</span>
<span class="nc" id="L510">    }</span>

    /**
     * Creates a window for the add parameter method and its data
     */
    private void addParameterWindow() {
        // initialize the stage and root
<span class="nc" id="L517">        Stage stage = new Stage();</span>
<span class="nc" id="L518">        Group root = new Group();</span>
<span class="nc" id="L519">        stage.setAlwaysOnTop(true);</span>
        // create a label for the text box for the class
<span class="nc" id="L521">        Label classNameText = new Label(&quot;Class name: &quot;);</span>
        // create a label for the text box for the method name
<span class="nc" id="L523">        Label methodNameText = new Label(&quot;Method name: &quot;);</span>
        // create a label for the text box for the parameter name
<span class="nc" id="L525">        Label paramText = new Label(&quot;Parameter name: &quot;);</span>
        // create a label for the text box for the parameter type
<span class="nc" id="L527">        Label paramTypeText = new Label(&quot;Parameter type: &quot;);</span>
        // create the text box for the class name
<span class="nc" id="L529">        TextField className = new TextField();</span>
<span class="nc" id="L530">        className.setPrefColumnCount(14);</span>
        // create the text box for the method name
<span class="nc" id="L532">        TextField methodName = new TextField();</span>
<span class="nc" id="L533">        methodName.setPrefColumnCount(14);</span>
        // create the text box for the parameter name
<span class="nc" id="L535">        TextField paramName = new TextField();</span>
<span class="nc" id="L536">        paramName.setPrefColumnCount(14);</span>
        // create the text box for the parameter type
<span class="nc" id="L538">        TextField paramType = new TextField();</span>
<span class="nc" id="L539">        paramType.setPrefColumnCount(14);</span>
        // create a button to add the method with the inputted name
<span class="nc" id="L541">        Button add = new Button(&quot;Add&quot;);</span>
<span class="nc" id="L542">        add.setOnAction(event -&gt; {</span>
<span class="nc bnc" id="L543" title="All 2 branches missed.">            if(this.controller.addParameterAction(className.getText(), methodName.getText(),</span>
<span class="nc" id="L544">                    paramName.getText(), paramType.getText(), stage))</span>
<span class="nc" id="L545">                addParameterWindowLoop ();</span>
<span class="nc" id="L546">            updateMenus();</span>
<span class="nc" id="L547">        });</span>
        // create a button to cancel out of the window and enable menu again
<span class="nc" id="L549">        Button cancel = new Button(&quot;Cancel&quot;);</span>
<span class="nc" id="L550">        cancel.setOnAction(event -&gt; this.controller.exitAction(stage));</span>
        // create the pane for the objects and add them all
<span class="nc" id="L552">        GridPane pane = new GridPane();</span>
<span class="nc" id="L553">        pane.add(classNameText, 0, 0);</span>
<span class="nc" id="L554">        pane.add(methodNameText, 0, 1);</span>
<span class="nc" id="L555">        pane.add(paramText, 0, 2);</span>
<span class="nc" id="L556">        pane.add(paramTypeText, 0, 3);</span>
<span class="nc" id="L557">        pane.add(className, 1, 0);</span>
<span class="nc" id="L558">        pane.add(methodName, 1, 1);</span>
<span class="nc" id="L559">        pane.add(paramName, 1, 2);</span>
<span class="nc" id="L560">        pane.add(paramType, 1, 3);</span>
<span class="nc" id="L561">        pane.add(add, 0, 4);</span>
<span class="nc" id="L562">        pane.add(cancel, 1, 4);</span>
        // finalize the window with standard formatting
<span class="nc" id="L564">        finalizeWindow(stage, root, pane, &quot;Add Parameter(s)&quot;, 225, 300);</span>
<span class="nc" id="L565">    }</span>

    private void addParameterWindowLoop () {
        // initialize the stage and root
<span class="nc" id="L569">        Stage stage = new Stage();</span>
<span class="nc" id="L570">        Group root = new Group();</span>
<span class="nc" id="L571">        stage.setAlwaysOnTop(true);</span>
        // create a label for the text box for the class
<span class="nc" id="L573">        Label continueText = new Label(&quot;Add Another Parameter?&quot;);</span>
        // create a button to continue creating parameters
<span class="nc" id="L575">        Button yes = new Button(&quot;Yes&quot;);</span>
<span class="nc" id="L576">        yes.setOnAction(event -&gt; {</span>
<span class="nc" id="L577">            stage.close();</span>
<span class="nc" id="L578">            addParameterWindow();</span>
<span class="nc" id="L579">        });</span>
        // create a button to stop creating parameters
<span class="nc" id="L581">        Button no = new Button(&quot;No&quot;);</span>
<span class="nc" id="L582">        no.setOnAction(event -&gt; this.controller.exitAction(stage));</span>
        // create the pane for the objects and add them all
<span class="nc" id="L584">        GridPane pane = new GridPane();</span>
<span class="nc" id="L585">        pane.add(continueText, 0, 0);</span>
<span class="nc" id="L586">        pane.add(yes, 0, 1);</span>
<span class="nc" id="L587">        pane.add(no, 1, 1);</span>
        // finalize the window with standard formatting
<span class="nc" id="L589">        finalizeWindow(stage, root, pane, &quot;Continue?&quot;, 110, 220);</span>
<span class="nc" id="L590">    }</span>

    /**
     * Creates a window for the delete class method and its data
     */
    private void deleteClassWindow() {
        // initialize the stage and root
<span class="nc" id="L597">        Stage stage = new Stage();</span>
<span class="nc" id="L598">        Group root = new Group();</span>
<span class="nc" id="L599">        stage.setAlwaysOnTop(true);</span>
        // create a label for the text box
<span class="nc" id="L601">        Label label = new Label(&quot;Class name: &quot;);</span>
        // create the text box for user input
<span class="nc" id="L603">        TextField text = new TextField();</span>
<span class="nc" id="L604">        text.setPrefColumnCount(16);</span>
        // create a button to delete the class with the inputted name
<span class="nc" id="L606">        Button delete = new Button(&quot;Delete&quot;);</span>
<span class="nc" id="L607">        delete.setOnAction(event -&gt; {</span>
<span class="nc" id="L608">            this.controller.deleteClassAction(text.getText(), stage);</span>
<span class="nc" id="L609">            updateMenus();</span>
<span class="nc" id="L610">        });</span>
        // create a button to cancel out of the window and enable menu again
<span class="nc" id="L612">        Button cancel = new Button(&quot;Cancel&quot;);</span>
<span class="nc" id="L613">        cancel.setOnAction(event -&gt; this.controller.exitAction(stage));</span>
        // create the pane for the objects and add them all
<span class="nc" id="L615">        GridPane pane = new GridPane();</span>
<span class="nc" id="L616">        pane.add(label, 0, 0);</span>
<span class="nc" id="L617">        pane.add(text, 1, 0);</span>
<span class="nc" id="L618">        pane.add(delete, 0, 1);</span>
<span class="nc" id="L619">        pane.add(cancel, 1, 1);</span>
        // finalize the window with standard formatting
<span class="nc" id="L621">        finalizeWindow(stage, root, pane, &quot;Delete Class&quot;, 120, 300);</span>
<span class="nc" id="L622">    }</span>

    /**
     * Creates a window for the delete field method and its data
     */
    private void deleteFieldWindow() {
        // initialize the stage and root
<span class="nc" id="L629">        Stage stage = new Stage();</span>
<span class="nc" id="L630">        Group root = new Group();</span>
<span class="nc" id="L631">        stage.setAlwaysOnTop(true);</span>
        // create a label for the text box for the class
<span class="nc" id="L633">        Label classNameText = new Label(&quot;Class name: &quot;);</span>
        // create a label for the text box for the field name
<span class="nc" id="L635">        Label fieldNameText = new Label(&quot;Field name: &quot;);</span>
        // create the text box for the class name
<span class="nc" id="L637">        TextField className = new TextField();</span>
<span class="nc" id="L638">        className.setPrefColumnCount(16);</span>
        // create the text box for the field name
<span class="nc" id="L640">        TextField fieldName = new TextField();</span>
<span class="nc" id="L641">        fieldName.setPrefColumnCount(16);</span>
        // create a button to add the field with the inputted name
<span class="nc" id="L643">        Button delete = new Button(&quot;Delete&quot;);</span>
<span class="nc" id="L644">        delete.setOnAction(event -&gt; {</span>
<span class="nc" id="L645">            this.controller.deleteFieldAction(className.getText(), fieldName.getText(), stage);</span>
<span class="nc" id="L646">            updateMenus();</span>
<span class="nc" id="L647">        });</span>
        // create a button to cancel out of the window and enable menu again
<span class="nc" id="L649">        Button cancel = new Button(&quot;Cancel&quot;);</span>
<span class="nc" id="L650">        cancel.setOnAction(event -&gt; this.controller.exitAction(stage));</span>
        // create the pane for the objects and add them all
<span class="nc" id="L652">        GridPane pane = new GridPane();</span>
<span class="nc" id="L653">        pane.add(classNameText, 0, 0);</span>
<span class="nc" id="L654">        pane.add(fieldNameText, 0, 1);</span>
<span class="nc" id="L655">        pane.add(className, 1, 0);</span>
<span class="nc" id="L656">        pane.add(fieldName, 1, 1);</span>
<span class="nc" id="L657">        pane.add(delete, 0, 2);</span>
<span class="nc" id="L658">        pane.add(cancel, 1, 2);</span>
        // finalize the window with standard formatting
<span class="nc" id="L660">        finalizeWindow(stage, root, pane, &quot;Delete Field&quot;, 155, 300);</span>
<span class="nc" id="L661">    }</span>

    /**
     * Creates a window for the delete method method and its data
     */
    private void deleteMethodWindow() {
    // initialize the stage and root
<span class="nc" id="L668">        Stage stage = new Stage();</span>
<span class="nc" id="L669">        Group root = new Group();</span>
<span class="nc" id="L670">        stage.setAlwaysOnTop(true);</span>
        // create a label for the text box for the class
<span class="nc" id="L672">        Label classNameText = new Label(&quot;Class name: &quot;);</span>
        // create a label for the text box for the method name
<span class="nc" id="L674">        Label fieldNameText = new Label(&quot;Method name: &quot;);</span>
        // create the text box for the class name
<span class="nc" id="L676">        TextField className = new TextField();</span>
<span class="nc" id="L677">        className.setPrefColumnCount(15);</span>
        // create the text box for the method name
<span class="nc" id="L679">        TextField methodName = new TextField();</span>
<span class="nc" id="L680">        methodName.setPrefColumnCount(15);</span>
        // create a button to add the field with the inputted name
<span class="nc" id="L682">        Button delete = new Button(&quot;Delete&quot;);</span>
<span class="nc" id="L683">        delete.setOnAction(event -&gt; {</span>
<span class="nc" id="L684">            this.controller.deleteMethodAction(className.getText(), methodName.getText(), stage);</span>
<span class="nc" id="L685">            updateMenus();</span>
<span class="nc" id="L686">        });</span>
        // create a button to cancel out of the window and enable menu again
<span class="nc" id="L688">        Button cancel = new Button(&quot;Cancel&quot;);</span>
<span class="nc" id="L689">        cancel.setOnAction(event -&gt; this.controller.exitAction(stage));</span>
        // create the pane for the objects and add them all
<span class="nc" id="L691">        GridPane pane = new GridPane();</span>
<span class="nc" id="L692">        pane.add(classNameText, 0, 0);</span>
<span class="nc" id="L693">        pane.add(fieldNameText, 0, 1);</span>
<span class="nc" id="L694">        pane.add(className, 1, 0);</span>
<span class="nc" id="L695">        pane.add(methodName, 1, 1);</span>
<span class="nc" id="L696">        pane.add(delete, 0, 2);</span>
<span class="nc" id="L697">        pane.add(cancel, 1, 2);</span>
        // finalize the window with standard formatting
<span class="nc" id="L699">        finalizeWindow(stage, root, pane, &quot;Delete Method&quot;, 155, 300);</span>
<span class="nc" id="L700">    }</span>

    /**
     * Creates a window for the delete parameter method and its data
     */
    private void deleteParameterWindow() {
        // initialize the stage and root
<span class="nc" id="L707">        Stage stage = new Stage();</span>
<span class="nc" id="L708">        Group root = new Group();</span>
<span class="nc" id="L709">        stage.setAlwaysOnTop(true);</span>
        // create a label for the text box for the class
<span class="nc" id="L711">        Label classNameText = new Label(&quot;Class name: &quot;);</span>
        // create a label for the text box for the method name
<span class="nc" id="L713">        Label methodNameText = new Label(&quot;Method name: &quot;);</span>
        // create a label for the text box for the parameter name
<span class="nc" id="L715">        Label paramText = new Label(&quot;Parameter name: &quot;);</span>
        // create the text box for the class name
<span class="nc" id="L717">        TextField className = new TextField();</span>
<span class="nc" id="L718">        className.setPrefColumnCount(15);</span>
        // create the text box for the method name
<span class="nc" id="L720">        TextField methodName = new TextField();</span>
<span class="nc" id="L721">        methodName.setPrefColumnCount(15);</span>
        // create the text box for the class name
<span class="nc" id="L723">        TextField paramName = new TextField();</span>
<span class="nc" id="L724">        paramName.setPrefColumnCount(15);</span>
        // create the text box for the class name
<span class="nc" id="L726">        TextField paramType = new TextField();</span>
<span class="nc" id="L727">        paramType.setPrefColumnCount(15);</span>
        // create a button to add the field with the inputted name
<span class="nc" id="L729">        Button delete = new Button(&quot;Delete&quot;);</span>
<span class="nc" id="L730">        delete.setOnAction(event -&gt; {</span>
<span class="nc bnc" id="L731" title="All 2 branches missed.">            if(this.controller.deleteParamAction(className.getText(), methodName.getText(), paramName.getText(),</span>
                    stage))
<span class="nc" id="L733">                deleteParameterWindowLoop();</span>
<span class="nc" id="L734">            updateMenus();</span>
<span class="nc" id="L735">        });</span>
        // create a button to cancel out of the window and enable menu again
<span class="nc" id="L737">        Button cancel = new Button(&quot;Cancel&quot;);</span>
<span class="nc" id="L738">        cancel.setOnAction(event -&gt; this.controller.exitAction(stage));</span>
        // create the pane for the objects and add them all
<span class="nc" id="L740">        GridPane pane = new GridPane();</span>
<span class="nc" id="L741">        pane.add(classNameText, 0, 0);</span>
<span class="nc" id="L742">        pane.add(methodNameText, 0, 1);</span>
<span class="nc" id="L743">        pane.add(paramText, 0, 2);</span>
<span class="nc" id="L744">        pane.add(className, 1, 0);</span>
<span class="nc" id="L745">        pane.add(methodName, 1, 1);</span>
<span class="nc" id="L746">        pane.add(paramName, 1, 2);</span>
<span class="nc" id="L747">        pane.add(delete, 0, 3);</span>
<span class="nc" id="L748">        pane.add(cancel, 1, 3);</span>
        // finalize the window with standard formatting
<span class="nc" id="L750">        finalizeWindow(stage, root, pane, &quot;Delete Parameter(s)&quot;, 185, 320);</span>
<span class="nc" id="L751">    }</span>

    private void deleteParameterWindowLoop () {
        // initialize the stage and root
<span class="nc" id="L755">        Stage stage = new Stage();</span>
<span class="nc" id="L756">        Group root = new Group();</span>
<span class="nc" id="L757">        stage.setAlwaysOnTop(true);</span>
        // create a label for the text box for the class
<span class="nc" id="L759">        Label continueText = new Label(&quot;Delete Another Parameter?&quot;);</span>
        // create a button to continue creating parameters
<span class="nc" id="L761">        Button yes = new Button(&quot;Yes&quot;);</span>
<span class="nc" id="L762">        yes.setOnAction(event -&gt; {</span>
<span class="nc" id="L763">            stage.close();</span>
<span class="nc" id="L764">            deleteParameterWindow();</span>
<span class="nc" id="L765">        });</span>
        // create a button to stop creating parameters
<span class="nc" id="L767">        Button no = new Button(&quot;No&quot;);</span>
<span class="nc" id="L768">        no.setOnAction(event -&gt; this.controller.exitAction(stage));</span>
        // create the pane for the objects and add them all
<span class="nc" id="L770">        GridPane pane = new GridPane();</span>
<span class="nc" id="L771">        pane.add(continueText, 0, 0);</span>
<span class="nc" id="L772">        pane.add(yes, 0, 1);</span>
<span class="nc" id="L773">        pane.add(no, 1, 1);</span>
        // finalize the window with standard formatting
<span class="nc" id="L775">        finalizeWindow(stage, root, pane, &quot;Continue?&quot;, 110, 220);</span>
<span class="nc" id="L776">    }</span>

    /**
     * Creates a window for the delete relationship method and its data
     */
    private void deleteRelWindow() {
        // initialize the stage and root
<span class="nc" id="L783">        Stage stage = new Stage();</span>
<span class="nc" id="L784">        Group root = new Group();</span>
<span class="nc" id="L785">        stage.setAlwaysOnTop(true);</span>
        // create a label for the text box for the source class name
<span class="nc" id="L787">        Label srcNameText = new Label(&quot;Source: &quot;);</span>
        // create a label for the text box for the destination class name
<span class="nc" id="L789">        Label destNameText = new Label(&quot;Destination: &quot;);</span>
        // create the text box for the source class name
<span class="nc" id="L791">        TextField srcName = new TextField();</span>
<span class="nc" id="L792">        srcName.setPrefColumnCount(13);</span>
        // create the text box for the destination class name
<span class="nc" id="L794">        TextField destName = new TextField();</span>
<span class="nc" id="L795">        destName.setPrefColumnCount(13);</span>
        // create a button to delete the relationship with the correct src and dest names
<span class="nc" id="L797">        Button delete = new Button(&quot;Delete&quot;);</span>
<span class="nc" id="L798">        delete.setOnAction(event -&gt; {</span>
<span class="nc" id="L799">            this.controller.deleteRelAction(srcName.getText(),</span>
<span class="nc" id="L800">                    destName.getText(), stage);</span>
<span class="nc" id="L801">            updateMenus();</span>
<span class="nc" id="L802">        });</span>
        // create a button to cancel out of the window and enable menu again
<span class="nc" id="L804">        Button cancel = new Button(&quot;Cancel&quot;);</span>
<span class="nc" id="L805">        cancel.setOnAction(event -&gt; this.controller.exitAction(stage));</span>
        // create the pane for the objects and add them all
<span class="nc" id="L807">        GridPane pane = new GridPane();</span>
<span class="nc" id="L808">        pane.add(srcNameText, 0, 0);</span>
<span class="nc" id="L809">        pane.add(destNameText, 0, 1);</span>
<span class="nc" id="L810">        pane.add(srcName, 1, 0);</span>
<span class="nc" id="L811">        pane.add(destName, 1, 1);</span>
<span class="nc" id="L812">        pane.add(delete, 0, 3);</span>
<span class="nc" id="L813">        pane.add(cancel, 1, 3);</span>
        // finalize the window with standard formatting
<span class="nc" id="L815">        finalizeWindow(stage, root, pane, &quot;Delete Relationship&quot;, 165, 300);</span>
<span class="nc" id="L816">    }</span>

    /**
     * Creates a window for the rename class method and its data
     */
    private void renameClassWindow() {
        // initialize the stage and root
<span class="nc" id="L823">        Stage stage = new Stage();</span>
<span class="nc" id="L824">        Group root = new Group();</span>
<span class="nc" id="L825">        stage.setAlwaysOnTop(true);</span>
        // create a label for the text box for the old class name
<span class="nc" id="L827">        Label classLabel = new Label(&quot;Old class name: &quot;);</span>
        // create a label for the text box for the new class name
<span class="nc" id="L829">        Label nameLabel = new Label(&quot;New class name: &quot;);</span>
        // create the text box for the class to be renamed
<span class="nc" id="L831">        TextField classToRename = new TextField();</span>
<span class="nc" id="L832">        classToRename.setPrefColumnCount(14);</span>
        // create the text box for the new class name
<span class="nc" id="L834">        TextField newClassName = new TextField();</span>
<span class="nc" id="L835">        newClassName.setPrefColumnCount(14);</span>
        // create a button to add the class with the inputted name
<span class="nc" id="L837">        Button rename = new Button(&quot;Rename&quot;);</span>
<span class="nc" id="L838">        rename.setOnAction(event -&gt; {</span>
<span class="nc" id="L839">            this.controller.renameClassAction(classToRename.getText(), newClassName.getText(), stage);</span>
<span class="nc" id="L840">            updateMenus();</span>
<span class="nc" id="L841">        });</span>
        // create a button to cancel out of the window and enable menu again
<span class="nc" id="L843">        Button cancel = new Button(&quot;Cancel&quot;);</span>
<span class="nc" id="L844">        cancel.setOnAction(event -&gt; this.controller.exitAction(stage));</span>
        // create the pane for the objects and add them all
<span class="nc" id="L846">        GridPane pane = new GridPane();</span>
<span class="nc" id="L847">        pane.add(classLabel, 0, 0);</span>
<span class="nc" id="L848">        pane.add(nameLabel, 0, 1);</span>
<span class="nc" id="L849">        pane.add(classToRename, 1, 0);</span>
<span class="nc" id="L850">        pane.add(newClassName, 1, 1);</span>
<span class="nc" id="L851">        pane.add(rename, 0, 2);</span>
<span class="nc" id="L852">        pane.add(cancel, 1, 2);</span>
        // finalize the window with standard formatting
<span class="nc" id="L854">        finalizeWindow(stage, root, pane, &quot;Rename Class&quot;, 155, 300);</span>
<span class="nc" id="L855">    }</span>

    /**
     * Creates a window for the rename field method and its data
     */
    private void renameFieldWindow() {
        // initialize the stage and root
<span class="nc" id="L862">        Stage stage = new Stage();</span>
<span class="nc" id="L863">        Group root = new Group();</span>
<span class="nc" id="L864">        stage.setAlwaysOnTop(true);</span>
        // create a label for the text box for the class with the field
<span class="nc" id="L866">        Label givenClassLabel = new Label(&quot;Class name: &quot;);</span>
        // create a label for the text box for the old field name
<span class="nc" id="L868">        Label fieldLabel = new Label(&quot;Old field name: &quot;);</span>
        // create a label for the text box for the new field name
<span class="nc" id="L870">        Label nameLabel = new Label(&quot;New field name: &quot;);</span>
        // create a label for the text box for the field type
<span class="nc" id="L872">        TextField givenClass = new TextField();</span>
<span class="nc" id="L873">        givenClass.setPrefColumnCount(14);</span>
        // create the text box for the field to be renamed
<span class="nc" id="L875">        TextField fieldToRename = new TextField();</span>
<span class="nc" id="L876">        fieldToRename.setPrefColumnCount(14);</span>
        // create the text box for the field type
<span class="nc" id="L878">        TextField fieldType = new TextField();</span>
<span class="nc" id="L879">        fieldType.setPrefColumnCount(14);</span>
        // create the text box for the new field name
<span class="nc" id="L881">        TextField newFieldName = new TextField();</span>
<span class="nc" id="L882">        newFieldName.setPrefColumnCount(14);</span>
        // create a button to add the field with the inputted name
<span class="nc" id="L884">        Button rename = new Button(&quot;Rename&quot;);</span>
<span class="nc" id="L885">        rename.setOnAction(event -&gt; {</span>
<span class="nc" id="L886">            this.controller.renameFieldAction(givenClass.getText(),</span>
<span class="nc" id="L887">                    fieldToRename.getText(),</span>
<span class="nc" id="L888">                    newFieldName.getText(), stage);</span>
<span class="nc" id="L889">            updateMenus();</span>
<span class="nc" id="L890">        });</span>
        // create a button to cancel out of the window and enable menu again
<span class="nc" id="L892">        Button cancel = new Button(&quot;Cancel&quot;);</span>
<span class="nc" id="L893">        cancel.setOnAction(event -&gt; this.controller.exitAction(stage));</span>
        // create the pane for the objects and add them all
<span class="nc" id="L895">        GridPane pane = new GridPane();</span>
<span class="nc" id="L896">        pane.add(givenClassLabel, 0, 0);</span>
<span class="nc" id="L897">        pane.add(fieldLabel, 0, 1);</span>
        //pane.add(fieldTypeText, 0, 2);
<span class="nc" id="L899">        pane.add(nameLabel, 0, 2);</span>
<span class="nc" id="L900">        pane.add(givenClass, 1, 0);</span>
<span class="nc" id="L901">        pane.add(fieldToRename, 1, 1);</span>
        //pane.add(fieldType, 1, 2);
<span class="nc" id="L903">        pane.add(newFieldName, 1, 2);</span>
<span class="nc" id="L904">        pane.add(rename, 0, 3);</span>
<span class="nc" id="L905">        pane.add(cancel, 1, 3);</span>
        // finalize the window with standard formatting
<span class="nc" id="L907">        finalizeWindow(stage, root, pane, &quot;Rename Field&quot;, 190, 300);</span>
<span class="nc" id="L908">    }</span>

    /**
     * Creates a window for the rename method method and its data
     */
    private void renameMethodWindow() {
        // initialize the stage and root
<span class="nc" id="L915">        Stage stage = new Stage();</span>
<span class="nc" id="L916">        Group root = new Group();</span>
<span class="nc" id="L917">        stage.setAlwaysOnTop(true);</span>
        // create a label for the text box for the class with the method
<span class="nc" id="L919">        Label givenClassLabel = new Label(&quot;Class name: &quot;);</span>
        // create a label for the text box for the old method name
<span class="nc" id="L921">        Label methodLabel = new Label(&quot;Old method name: &quot;);</span>
        // create a label for the text box for the new method name
<span class="nc" id="L923">        Label nameLabel = new Label(&quot;New method name: &quot;);</span>
        // create the text box for the class with the method
<span class="nc" id="L925">        TextField givenClass = new TextField();</span>
<span class="nc" id="L926">        givenClass.setPrefColumnCount(12);</span>
        // create the text box for the method to be renamed
<span class="nc" id="L928">        TextField methodToRename = new TextField();</span>
<span class="nc" id="L929">        methodToRename.setPrefColumnCount(12);</span>
        // create the text box for the new method name
<span class="nc" id="L931">        TextField newMethodName = new TextField();</span>
<span class="nc" id="L932">        newMethodName.setPrefColumnCount(12);</span>
        // create a button to add the method with the inputted name
<span class="nc" id="L934">        Button rename = new Button(&quot;Rename&quot;);</span>
<span class="nc" id="L935">        rename.setOnAction(event -&gt; {</span>
<span class="nc" id="L936">            this.controller.renameMethodAction(givenClass.getText(),</span>
<span class="nc" id="L937">                    methodToRename.getText(), newMethodName.getText(), stage);</span>
<span class="nc" id="L938">            updateMenus();</span>
<span class="nc" id="L939">        });</span>
        // create a button to cancel out of the window and enable menu again
<span class="nc" id="L941">        Button cancel = new Button(&quot;Cancel&quot;);</span>
<span class="nc" id="L942">        cancel.setOnAction(event -&gt; this.controller.exitAction(stage));</span>
        // create the pane for the objects and add them all
<span class="nc" id="L944">        GridPane pane = new GridPane();</span>
<span class="nc" id="L945">        pane.add(givenClassLabel, 0, 0);</span>
<span class="nc" id="L946">        pane.add(methodLabel, 0, 1);</span>
<span class="nc" id="L947">        pane.add(nameLabel, 0, 2);</span>
<span class="nc" id="L948">        pane.add(givenClass, 1, 0);</span>
<span class="nc" id="L949">        pane.add(methodToRename, 1, 1);</span>
<span class="nc" id="L950">        pane.add(newMethodName, 1, 2);</span>
<span class="nc" id="L951">        pane.add(rename, 0, 3);</span>
<span class="nc" id="L952">        pane.add(cancel, 1, 3);</span>
        // finalize the window with standard formatting
<span class="nc" id="L954">        finalizeWindow(stage, root, pane, &quot;Rename Method&quot;, 190, 300);</span>
<span class="nc" id="L955">    }</span>

    /**
     * Creates a window for the change parameter method and its data
     */
    private void changeParamWindow() {
        // initialize the stage and root
<span class="nc" id="L962">        Stage stage = new Stage();</span>
<span class="nc" id="L963">        Group root = new Group();</span>
<span class="nc" id="L964">        stage.setAlwaysOnTop(true);</span>
        // create a label for the text box for the class with the method
<span class="nc" id="L966">        Label givenClassLabel = new Label(&quot;Class name: &quot;);</span>
        // create a label for the text box for the method with the parameter
<span class="nc" id="L968">        Label givenMethodLabel = new Label(&quot;Method name: &quot;);</span>
        // create a label for the text box for the old parameter name
<span class="nc" id="L970">        Label paramLabel = new Label(&quot;Old parameter name: &quot;);</span>
        // create a label for the text box for the new parameter name
<span class="nc" id="L972">        Label nameLabel = new Label(&quot;New parameter name: &quot;);</span>
        // create a label for the text box for the new parameter type
<span class="nc" id="L974">        Label typeLabel = new Label(&quot;New parameter type: &quot;);</span>
        // create the text box for the class with the method
<span class="nc" id="L976">        TextField givenClass = new TextField();</span>
<span class="nc" id="L977">        givenClass.setPrefColumnCount(11);</span>
        // create the text box for the method with the parameter
<span class="nc" id="L979">        TextField givenMethod = new TextField();</span>
<span class="nc" id="L980">        givenMethod.setPrefColumnCount(11);</span>
        // create the text box for the parameter to change
<span class="nc" id="L982">        TextField paramToChange = new TextField();</span>
<span class="nc" id="L983">        paramToChange.setPrefColumnCount(11);</span>
        // create the text box for the new parameter name
<span class="nc" id="L985">        TextField newParamName = new TextField();</span>
<span class="nc" id="L986">        newParamName.setPrefColumnCount(11);</span>
        // create the text box for the new parameter type
<span class="nc" id="L988">        TextField newParamType = new TextField();</span>
<span class="nc" id="L989">        newParamType.setPrefColumnCount(11);</span>
        // create a button to add the method with the inputted name
<span class="nc" id="L991">        Button change = new Button(&quot;Change&quot;);</span>
<span class="nc" id="L992">        change.setOnAction(event -&gt; {</span>
<span class="nc bnc" id="L993" title="All 2 branches missed.">            if(this.controller.changeParameterAction(givenClass.getText(), givenMethod.getText(),</span>
<span class="nc" id="L994">                    paramToChange.getText(), newParamName.getText(), newParamType.getText(), stage))</span>
<span class="nc" id="L995">                changeParameterWindowLoop();</span>
<span class="nc" id="L996">            updateMenus();</span>
<span class="nc" id="L997">        });</span>
        // create a button to cancel out of the window and enable menu again
<span class="nc" id="L999">        Button cancel = new Button(&quot;Cancel&quot;);</span>
<span class="nc" id="L1000">        cancel.setOnAction(event -&gt; this.controller.exitAction(stage));</span>
        // create the pane for the objects and add them all
<span class="nc" id="L1002">        GridPane pane = new GridPane();</span>
<span class="nc" id="L1003">        pane.add(givenClassLabel, 0, 0);</span>
<span class="nc" id="L1004">        pane.add(givenMethodLabel, 0, 1);</span>
<span class="nc" id="L1005">        pane.add(paramLabel, 0, 2);</span>
<span class="nc" id="L1006">        pane.add(nameLabel, 0, 3);</span>
<span class="nc" id="L1007">        pane.add(typeLabel, 0, 4);</span>
<span class="nc" id="L1008">        pane.add(givenClass, 1, 0);</span>
<span class="nc" id="L1009">        pane.add(givenMethod, 1, 1);</span>
<span class="nc" id="L1010">        pane.add(paramToChange, 1, 2);</span>
<span class="nc" id="L1011">        pane.add(newParamName, 1, 3);</span>
<span class="nc" id="L1012">        pane.add(newParamType, 1, 4);</span>
<span class="nc" id="L1013">        pane.add(change, 0, 5);</span>
<span class="nc" id="L1014">        pane.add(cancel, 1, 5);</span>
        // finalize the window with standard formatting
<span class="nc" id="L1016">        finalizeWindow(stage, root, pane, &quot;Change Parameter(s)&quot;, 260, 300);</span>
<span class="nc" id="L1017">    }</span>

    private void changeParameterWindowLoop () {
        // initialize the stage and root
<span class="nc" id="L1021">        Stage stage = new Stage();</span>
<span class="nc" id="L1022">        Group root = new Group();</span>
<span class="nc" id="L1023">        stage.setAlwaysOnTop(true);</span>
        // create a label for the text box for the class
<span class="nc" id="L1025">        Label continueText = new Label(&quot;Change Another Parameter?&quot;);</span>
        // create a button to continue creating parameters
<span class="nc" id="L1027">        Button yes = new Button(&quot;Yes&quot;);</span>
<span class="nc" id="L1028">        yes.setOnAction(event -&gt; {</span>
<span class="nc" id="L1029">            stage.close();</span>
<span class="nc" id="L1030">            changeParamWindow();</span>
<span class="nc" id="L1031">        });</span>
        // create a button to stop creating parameters
<span class="nc" id="L1033">        Button no = new Button(&quot;No&quot;);</span>
<span class="nc" id="L1034">        no.setOnAction(event -&gt; this.controller.exitAction(stage));</span>
        // create the pane for the objects and add them all
<span class="nc" id="L1036">        GridPane pane = new GridPane();</span>
<span class="nc" id="L1037">        pane.add(continueText, 0, 0);</span>
<span class="nc" id="L1038">        pane.add(yes, 0, 1);</span>
<span class="nc" id="L1039">        pane.add(no, 1, 1);</span>
        // finalize the window with standard formatting
<span class="nc" id="L1041">        finalizeWindow(stage, root, pane, &quot;Continue?&quot;, 110, 220);</span>
<span class="nc" id="L1042">    }</span>

    /**
     * Creates a window for the change relationship method and its data
     */
    private void changeRelTypeWindow(){
        // initialize the stage and root
<span class="nc" id="L1049">        Stage stage = new Stage();</span>
<span class="nc" id="L1050">        Group root = new Group();</span>
<span class="nc" id="L1051">        stage.setAlwaysOnTop(true);</span>
        // create a label for the next text box for the source class
<span class="nc" id="L1053">        Label srcLabel = new Label(&quot;Source: &quot;);</span>
        // create a label for the next text box for the source class
<span class="nc" id="L1055">        Label destLabel = new Label(&quot;Destination: &quot;);</span>
        // create a label for the text box for the old type name
<span class="nc" id="L1057">        Label relTypeLabel = new Label(&quot;Old type: &quot;);</span>
        // create a label for the text box for the new type name
<span class="nc" id="L1059">        Label newRelTypeLabel = new Label(&quot;New type: &quot;);</span>
        // create the text box for the type to be renamed
<span class="nc" id="L1061">        TextField srcName = new TextField();</span>
<span class="nc" id="L1062">        srcName.setPrefColumnCount(16);</span>
        // create the text box for the new type name
<span class="nc" id="L1064">        TextField destName = new TextField();</span>
<span class="nc" id="L1065">        destName.setPrefColumnCount(16);</span>
        // create the text box for the type to be renamed
<span class="nc" id="L1067">        TextField oldRelTypeName = new TextField();</span>
<span class="nc" id="L1068">        oldRelTypeName.setPrefColumnCount(16);</span>
        // create the text box for the new type name
<span class="nc" id="L1070">        TextField newRelTypeName = new TextField();</span>
<span class="nc" id="L1071">        newRelTypeName.setPrefColumnCount(16);</span>
        // create a button to add the class with the inputted name
<span class="nc" id="L1073">        Button rename = new Button(&quot;Change&quot;);</span>
<span class="nc" id="L1074">        rename.setOnAction(event -&gt; {</span>
<span class="nc" id="L1075">            this.controller.changeRelTypeAction(srcName.getText(),</span>
<span class="nc" id="L1076">                    destName.getText(), oldRelTypeName.getText(), newRelTypeName.getText(), stage);</span>
<span class="nc" id="L1077">            updateMenus();</span>
<span class="nc" id="L1078">        });</span>
        // create a button to cancel out of the window and enable menu again
<span class="nc" id="L1080">        Button cancel = new Button(&quot;Cancel&quot;);</span>
<span class="nc" id="L1081">        cancel.setOnAction(event -&gt; this.controller.exitAction(stage));</span>
        // create the pane for the objects and add them all
<span class="nc" id="L1083">        GridPane pane = new GridPane();</span>
<span class="nc" id="L1084">        pane.add(srcLabel, 0, 0);</span>
<span class="nc" id="L1085">        pane.add(destLabel, 0, 1);</span>
<span class="nc" id="L1086">        pane.add(relTypeLabel, 0, 2);</span>
<span class="nc" id="L1087">        pane.add(newRelTypeLabel, 0, 3);</span>
<span class="nc" id="L1088">        pane.add(srcName, 1, 0);</span>
<span class="nc" id="L1089">        pane.add(destName, 1, 1);</span>
<span class="nc" id="L1090">        pane.add(oldRelTypeName, 1, 2);</span>
<span class="nc" id="L1091">        pane.add(newRelTypeName, 1, 3);</span>
<span class="nc" id="L1092">        pane.add(rename, 0, 4);</span>
<span class="nc" id="L1093">        pane.add(cancel, 1, 4);</span>
        // finalize the window with standard formatting
<span class="nc" id="L1095">        finalizeWindow(stage, root, pane, &quot;Change Relationship Type&quot;, 225, 300);</span>
<span class="nc" id="L1096">    }</span>

    /**
     * Creates a window for the help method and its data
     */
    private void showCommandsWindow() {
        // initialize the stage and root
<span class="nc" id="L1103">        Stage stage = new Stage();</span>
<span class="nc" id="L1104">        Group root = new Group();</span>
<span class="nc" id="L1105">        stage.setAlwaysOnTop(true);</span>
        // create a label for the command list
<span class="nc" id="L1107">        Text commandList = new Text(this.model.getGUIHelpMenu());</span>
        // create a button to cancel out of the window and enable menu again
<span class="nc" id="L1109">        Button cancel = new Button(&quot;Cancel&quot;);</span>
<span class="nc" id="L1110">        cancel.setOnAction(event -&gt; this.controller.exitAction(stage));</span>
        // create the pane for the object and adds it
<span class="nc" id="L1112">        GridPane pane = new GridPane();</span>
<span class="nc" id="L1113">        pane.add(commandList, 0, 0);</span>
<span class="nc" id="L1114">        pane.add(cancel, 1, 1);</span>
        // finalize the window with standard formatting
<span class="nc" id="L1116">        finalizeWindow(stage, root, pane, &quot;Show Commands&quot;, 460, 615);</span>
<span class="nc" id="L1117">    }</span>

    /**
     * Creates a standard popup window for telling the user something
     *
     * @param title the title of the popup window
     * @param text  the text to be displayed in the popup
     */
    public void popUpWindow(String title, String text) {
        // initialize the stage and root
<span class="nc" id="L1127">        Stage stage = new Stage();</span>
<span class="nc" id="L1128">        Group root = new Group();</span>
<span class="nc" id="L1129">        stage.setAlwaysOnTop(true);</span>
        // create a message for the user
<span class="nc" id="L1131">        Label message = new Label(text);</span>
        // create a button to cancel out of the window
<span class="nc" id="L1133">        Button cancel = new Button(&quot;Okay&quot;);</span>
<span class="nc" id="L1134">        cancel.setOnAction(event -&gt; this.controller.exitAction(stage));</span>
        // create the pane for the objects and add them all
<span class="nc" id="L1136">        GridPane pane = new GridPane();</span>
<span class="nc" id="L1137">        pane.add(message, 0, 0);</span>
<span class="nc" id="L1138">        pane.add(cancel, 1, 0);</span>
        // finalize the window with standard formatting
<span class="nc" id="L1140">        finalizeWindow(stage, root, pane, title, 100, 300);</span>
<span class="nc" id="L1141">    }</span>

    /******************************************************************
     *
     * End of window methods &amp; Start of helper methods
     *
     ******************************************************************/

    //***************************************//
    //*********** Drawing Objects ***********//
    //***************************************//

    /**
     * Takes in a class name and draws a new class box object
     *
     * @param className the name of the class
     */
    public void drawClassBox(String className, int xOffset, int yOffset)  {
        // create a class box object, add it to the class box list and the super root
<span class="nc" id="L1160">        ClassBox classBox = new ClassBox(className);</span>
<span class="nc" id="L1161">        superRoot.getChildren().add(classBox.getClassPane());</span>
<span class="nc" id="L1162">        classBoxList.add(classBox);</span>
        // place class box in correct area
<span class="nc" id="L1164">        classBox.getClassPane().setTranslateX(classBox.getBoxWidth() + xOffset);</span>
<span class="nc" id="L1165">        classBox.getClassPane().setTranslateY(classBox.getBoxHeight() + yOffset);</span>
        // set the x and y to the right coordinates
<span class="nc" id="L1167">        classBox.setX(classBox.getClassPane().getTranslateX());</span>
<span class="nc" id="L1168">        classBox.setY(classBox.getClassPane().getTranslateY());</span>
        // when the box is clicked on begin drag with mouse
<span class="nc" id="L1170">        classBox.getClassPane().setOnMouseDragEntered(event -&gt; {</span>
<span class="nc" id="L1171">            startDragX = event.getSceneX();</span>
<span class="nc" id="L1172">            startDragY = event.getSceneY();</span>
<span class="nc" id="L1173">        });</span>

        // keep box under mouse as the mouse continues to drag
<span class="nc" id="L1176">        classBox.getClassPane().setOnMouseDragged(event -&gt; {</span>
<span class="nc" id="L1177">            classBox.getClassPane().setTranslateX(event.getSceneX() - startDragX);</span>
<span class="nc" id="L1178">            classBox.getClassPane().setTranslateY(event.getSceneY() - startDragY);</span>
            // set the x and y to the right coordinates
<span class="nc" id="L1180">            classBox.setX(classBox.getClassPane().getTranslateX());</span>
<span class="nc" id="L1181">            classBox.setY(classBox.getClassPane().getTranslateY());</span>
<span class="nc" id="L1182">            addToCoordinateMap(className, classBox.getX(), classBox.getY());</span>
<span class="nc" id="L1183">        });</span>
        // Increases box width if className is too big for the default
<span class="nc bnc" id="L1185" title="All 2 branches missed.">        if((int)(font.getStringBounds(className, frc)).getWidth() + 30 &gt; classBox.getBoxWidth())</span>
        {
<span class="nc" id="L1187">            classBox.setBoxWidth((int)(font.getStringBounds(className, frc)).getWidth() + 30);</span>
        }
<span class="nc" id="L1189">    }</span>

    /**
     * Moves all the classes in the diagram to their saved x and y fields
     */
    public void moveClassBoxes() {
        // iterate through the class box list and set the translate x and y to the right value
<span class="nc bnc" id="L1196" title="All 2 branches missed.">        for (ClassBox cbObj : classBoxList) {</span>
<span class="nc" id="L1197">            double X = this.model.getCoordinateMap().get(cbObj.getClassBoxName()).get(0);</span>
<span class="nc" id="L1198">            double Y = this.model.getCoordinateMap().get(cbObj.getClassBoxName()).get(1);</span>
<span class="nc" id="L1199">            cbObj.setX(X);</span>
<span class="nc" id="L1200">            cbObj.setY(Y);</span>
<span class="nc" id="L1201">            cbObj.getClassPane().setTranslateX(cbObj.getX());</span>
<span class="nc" id="L1202">            cbObj.getClassPane().setTranslateY(cbObj.getY());</span>
<span class="nc" id="L1203">        }</span>
<span class="nc" id="L1204">    }</span>

    public void drawFieldBox(int fieldListSize, int methListSize, Field field, String className) {
<span class="nc" id="L1207">        ClassBox box = findClassBox(className);</span>
<span class="nc" id="L1208">        box.setBoxHeight(box.getBoxHeight() + 15);</span>
<span class="nc" id="L1209">        box.addText(field, fieldListSize, methListSize, false);</span>

        // Increases box size if the field will extend past it
<span class="nc" id="L1212">        if((int)(font.getStringBounds(field.getAttName() + &quot; : &quot; + field.getFieldType(), frc)).getWidth() + 30</span>
<span class="nc bnc" id="L1213" title="All 2 branches missed.">                &gt; box.getBoxWidth())</span>
        {
<span class="nc" id="L1215">            box.setBoxWidth((int)(font.getStringBounds(field.getAttName() + &quot; : &quot; + field.getFieldType(), frc))</span>
<span class="nc" id="L1216">                    .getWidth() + 30);</span>
        }
<span class="nc" id="L1218">    }</span>

    public void drawMethodBox(int fieldListSize, int methListSize, Method meth, String className) {
<span class="nc" id="L1221">        ClassBox box = findClassBox(className);</span>
<span class="nc" id="L1222">        box.setBoxHeight(box.getBoxHeight() + 15);</span>
<span class="nc" id="L1223">        box.addText(meth, fieldListSize, methListSize, false);</span>

        // Calculates pixel width of type
<span class="nc" id="L1226">        String methType = &quot;&quot;;</span>
<span class="nc bnc" id="L1227" title="All 2 branches missed.">        if (!meth.getReturnType().equals(&quot;void&quot;))</span>
        {
<span class="nc" id="L1229">            methType = meth.getReturnType();</span>
        }

        // Increases box size if the method will extend past it
<span class="nc" id="L1233">        if((int)(font.getStringBounds(meth.getAttName() + &quot; : &quot; + meth.getReturnType(), frc))</span>
<span class="nc bnc" id="L1234" title="All 2 branches missed.">                .getWidth() + 30 &gt; box.getBoxWidth())</span>
        {
<span class="nc" id="L1236">            box.setBoxWidth((int)(font.getStringBounds(meth.getAttName() + &quot; : &quot; +</span>
<span class="nc" id="L1237">                    meth.getReturnType(), frc)).getWidth() + 30);</span>
        }
<span class="nc" id="L1239">    }</span>

    public void resizeMethod(Method meth, String className) {
<span class="nc" id="L1242">        ClassBox box = findClassBox(className);</span>

        // Calculates pixel width of type
<span class="nc" id="L1245">        String methType = &quot;&quot;;</span>
<span class="nc bnc" id="L1246" title="All 2 branches missed.">        if (!meth.getReturnType().equals(&quot;void&quot;))</span>
        {
<span class="nc" id="L1248">            methType = meth.getReturnType();</span>
        }

        // Caculate pixel length of all parameters in the current method
<span class="nc" id="L1252">        String param = &quot;&quot;;</span>
<span class="nc bnc" id="L1253" title="All 2 branches missed.">        for (Parameter tempParam : meth.getParamList())</span>
        {
<span class="nc" id="L1255">            param += &quot;, &quot; + tempParam.getAttName() + &quot; : &quot; + tempParam.getFieldType();</span>
<span class="nc" id="L1256">        }</span>

        // Increases box size if the method will extend past it
<span class="nc" id="L1259">        if((int)(font.getStringBounds(meth.getAttName() + &quot;(&quot; + param + &quot;) &quot; + meth.getReturnType(), frc))</span>
<span class="nc bnc" id="L1260" title="All 2 branches missed.">                .getWidth() &gt; box.getBoxWidth())</span>
        {
<span class="nc" id="L1262">            box.setBoxWidth((int)(font.getStringBounds(meth.getAttName() + &quot;(&quot; + param + &quot;) &quot; +</span>
<span class="nc" id="L1263">                    meth.getReturnType(), frc)).getWidth());</span>
        }
<span class="nc" id="L1265">    }</span>

    /**
     * Takes in the source and destination class names and a type
     * Draws a line with a style depending on the type of relationship
     *  @param src the source class name
     * @param dest the destination class name
     * @param relType the relationship type
     */
    public void drawLine(String src, String dest, String relType){
<span class="nc" id="L1275">        ClassBox source = null;</span>
<span class="nc" id="L1276">        ClassBox destination = null;</span>
        // search through the class box list for the source and destination classes
<span class="nc bnc" id="L1278" title="All 2 branches missed.">        for(ClassBox box : classBoxList){</span>
<span class="nc bnc" id="L1279" title="All 2 branches missed.">            if(box.getClassBoxName().equals(src)){</span>
<span class="nc" id="L1280">                source = box;</span>
            }
<span class="nc bnc" id="L1282" title="All 2 branches missed.">            if(box.getClassBoxName().equals(dest)){</span>
<span class="nc" id="L1283">                destination = box;</span>
            }
<span class="nc" id="L1285">        }</span>
<span class="nc bnc" id="L1286" title="All 4 branches missed.">        assert source != null;</span>
<span class="nc bnc" id="L1287" title="All 4 branches missed.">        assert destination != null;</span>
        // draw a new line that connects to the source and destination class boxes
<span class="nc" id="L1289">        RelLine newRelLine = new RelLine(source, destination, relType);</span>
        // create dashed line with empty arrowhead
<span class="nc bnc" id="L1291" title="All 5 branches missed.">        switch (relLineStyle(newRelLine.getRelType())) {</span>
            case &quot;EA&quot; -&gt; {
<span class="nc" id="L1293">                newRelLine.getLine().setStrokeWidth(0);</span>
<span class="nc" id="L1294">                arrowList.add(emptyArrow(newRelLine));</span>
<span class="nc" id="L1295">            }</span>
            // create line with filled in arrowhead
<span class="nc" id="L1297">            case &quot;FA&quot; -&gt; arrowList.add(filledArrow(newRelLine));</span>

            // create line with filled in diamond
<span class="nc" id="L1300">            case &quot;FD&quot; -&gt; arrowList.add(filledDiamond(newRelLine));</span>

            // create line with empty diamond
            case &quot;ED&quot; -&gt; {
<span class="nc" id="L1304">                newRelLine.getLine().setStrokeWidth(0);</span>
<span class="nc" id="L1305">                arrowList.add(emptyDiamond(newRelLine));</span>
            }
        }
        // add the new line to the line list and the super root
<span class="nc" id="L1309">        lineList.add(newRelLine);</span>
<span class="nc" id="L1310">        superRoot.getChildren().add(0, newRelLine.getLine());</span>
<span class="nc" id="L1311">    }</span>

    //***************************************//
    //******* Manipulation of Objects *******//
    //***************************************//

    /**
     * Takes in a relationship line
     * Draws an empty arrowhead shape
     * (Realization)
     *
     * @param line the relationship line
     */
    public ArrayList&lt;Line&gt; emptyArrow(RelLine line){
        // top(right) and bottom(left) arrows
<span class="nc" id="L1326">        Line topArrow = new Line();</span>
<span class="nc" id="L1327">        topArrow.setStrokeWidth(5);</span>
<span class="nc" id="L1328">        topArrow.setStroke(Color.BLACK);</span>
<span class="nc" id="L1329">        Line bottomArrow = new Line();</span>
<span class="nc" id="L1330">        bottomArrow.setStrokeWidth(5);</span>
<span class="nc" id="L1331">        bottomArrow.setStroke(Color.BLACK);</span>
        // completes the arrow and fills in diamond
<span class="nc" id="L1333">        Line middleArrow = new Line();</span>
<span class="nc" id="L1334">        middleArrow.setStrokeWidth(5);</span>
<span class="nc" id="L1335">        middleArrow.setStroke(Color.BLACK);</span>
        // for replacement line bindings setup
<span class="nc" id="L1337">        Line tBackArrow = new Line();</span>
<span class="nc" id="L1338">        tBackArrow.setStrokeWidth(0);</span>
        // Set up arrow's shape
<span class="nc" id="L1340">        InvalidationListener update = observable -&gt; {</span>
<span class="nc" id="L1341">            double endX = line.getLine().getEndX();</span>
<span class="nc" id="L1342">            double endY = line.getLine().getEndY();</span>
<span class="nc" id="L1343">            double startX = line.getLine().getStartX();</span>
<span class="nc" id="L1344">            double startY = line.getLine().getStartY();</span>
            // end of arrow head is the end of the line
<span class="nc" id="L1346">            topArrow.setEndX(endX);</span>
<span class="nc" id="L1347">            topArrow.setEndY(endY);</span>
<span class="nc" id="L1348">            bottomArrow.setEndX(endX);</span>
<span class="nc" id="L1349">            bottomArrow.setEndY(endY);</span>
            // get arrowhead angle
<span class="nc" id="L1351">            double lengthM = 25 / Math.hypot(startX - endX, startY - endY);</span>
<span class="nc" id="L1352">            double widthM = 9 / Math.hypot(startX - endX, startY - endY);</span>
            // arrow shape regarding direction of main line
<span class="nc" id="L1354">            double dirX = (startX - endX) * lengthM;</span>
<span class="nc" id="L1355">            double dirY = (startY - endY) * lengthM;</span>
            // arrow shape regarding orthogonal of main line
<span class="nc" id="L1357">            double orthX = (startX - endX) * widthM;</span>
<span class="nc" id="L1358">            double orthY = (startY - endY) * widthM;</span>
            //replacement variables to get dashed line closer to arrow
<span class="nc" id="L1360">            double rLength = 7 / Math.hypot(startX - endX, startY - endY);</span>
<span class="nc" id="L1361">            double rDirX = (startX - endX) * rLength;</span>
<span class="nc" id="L1362">            double rDirY = (startY - endY) * rLength;</span>
            // set proper arrow shape
<span class="nc" id="L1364">            topArrow.setStartX(endX + dirX - orthY);</span>
<span class="nc" id="L1365">            topArrow.setStartY(endY + dirY + orthX);</span>
<span class="nc" id="L1366">            bottomArrow.setStartX(endX + dirX + orthY);</span>
<span class="nc" id="L1367">            bottomArrow.setStartY(endY + dirY - orthX);</span>
<span class="nc" id="L1368">            tBackArrow.setStartX(topArrow.getStartX());</span>
<span class="nc" id="L1369">            tBackArrow.setStartY(topArrow.getStartY());</span>
<span class="nc" id="L1370">            tBackArrow.setEndX(topArrow.getStartX() + rDirX + orthY);</span>
<span class="nc" id="L1371">            tBackArrow.setEndY(topArrow.getStartY() + rDirY - orthX);</span>
<span class="nc" id="L1372">            middleArrow.setStartX(bottomArrow.getStartX() - .5);</span>
<span class="nc" id="L1373">            middleArrow.setStartY(bottomArrow.getStartY() - .5);</span>
<span class="nc" id="L1374">            middleArrow.setEndX(topArrow.getStartX() - .5);</span>
<span class="nc" id="L1375">            middleArrow.setEndY(topArrow.getStartY() - .5);</span>
<span class="nc" id="L1376">        };</span>
        // bindings for replacement line to invisible original line
<span class="nc" id="L1378">        DoubleBinding startXBind = line.getCBSrc().getClassPane().translateXProperty().add(line.getCBSrc()</span>
<span class="nc" id="L1379">                .getClassPane().widthProperty().divide(2));</span>
<span class="nc" id="L1380">        DoubleBinding startYBind = line.getCBSrc().getClassPane().translateYProperty().add(line.getCBSrc()</span>
<span class="nc" id="L1381">                .getClassPane().heightProperty().divide(2));</span>
<span class="nc" id="L1382">        DoubleBinding endXBind = tBackArrow.translateXProperty().add(tBackArrow.endXProperty());</span>
<span class="nc" id="L1383">        DoubleBinding endYBind = tBackArrow.translateYProperty().add(tBackArrow.endYProperty());</span>
        // replacement line for real line, set bindings
<span class="nc" id="L1385">        Line rLine = new Line();</span>
<span class="nc" id="L1386">        rLine.setStroke(Color.BLACK);</span>
<span class="nc" id="L1387">        rLine.setStrokeWidth(9.5);</span>
<span class="nc" id="L1388">        rLine.setStrokeLineCap(StrokeLineCap.BUTT);</span>
<span class="nc" id="L1389">        rLine.getStrokeDashArray().addAll(15d);</span>
<span class="nc" id="L1390">        rLine.setStrokeDashOffset(10);</span>
<span class="nc" id="L1391">        rLine.startXProperty().bind(startXBind);</span>
<span class="nc" id="L1392">        rLine.startYProperty().bind(startYBind);</span>
<span class="nc" id="L1393">        rLine.endXProperty().bind(endXBind);</span>
<span class="nc" id="L1394">        rLine.endYProperty().bind(endYBind);</span>
        // update to arrow shape when moving line
<span class="nc" id="L1396">        line.getLine().startXProperty().addListener(update);</span>
<span class="nc" id="L1397">        line.getLine().startYProperty().addListener(update);</span>
<span class="nc" id="L1398">        line.getLine().endXProperty().addListener(update);</span>
<span class="nc" id="L1399">        line.getLine().endYProperty().addListener(update);</span>
        //same update listener for replacement lines
<span class="nc" id="L1401">        rLine.startXProperty().addListener(update);</span>
<span class="nc" id="L1402">        rLine.startYProperty().addListener(update);</span>
<span class="nc" id="L1403">        rLine.endXProperty().addListener(update);</span>
<span class="nc" id="L1404">        rLine.endYProperty().addListener(update);</span>
<span class="nc" id="L1405">        update.invalidated(null);</span>
        // add lines to the super root to show up in gui
        // (DO NOT change these line below to an addAll call for superRoot.getChildren, the order matters)
<span class="nc" id="L1408">        superRoot.getChildren().add(1, topArrow);</span>
<span class="nc" id="L1409">        superRoot.getChildren().add(2, bottomArrow);</span>
<span class="nc" id="L1410">        superRoot.getChildren().add(3, middleArrow);</span>
<span class="nc" id="L1411">        superRoot.getChildren().add(4, tBackArrow);</span>
<span class="nc" id="L1412">        superRoot.getChildren().add(5, rLine);</span>
        // add lines to array list to be manipulated(accessed or deleted)
<span class="nc" id="L1414">        ArrayList&lt;Line&gt; arrowShape = new ArrayList&lt;&gt;();</span>
<span class="nc" id="L1415">        arrowShape.add(topArrow);</span>
<span class="nc" id="L1416">        arrowShape.add(bottomArrow);</span>
<span class="nc" id="L1417">        arrowShape.add(middleArrow);</span>
<span class="nc" id="L1418">        arrowShape.add(tBackArrow);</span>
<span class="nc" id="L1419">        arrowShape.add(rLine);</span>
<span class="nc" id="L1420">        return arrowShape;</span>
    }

    /**
     * Takes in a relationship line
     * Draws a filled in arrowhead shape
     * (Inheritance)
     *
     * @param line the relationship line
     */
    public ArrayList&lt;Line&gt; filledArrow(RelLine line){
        // top(right) and bottom(left) arrows
<span class="nc" id="L1432">        Line topArrow = new Line();</span>
<span class="nc" id="L1433">        topArrow.setStrokeWidth(6);</span>
<span class="nc" id="L1434">        topArrow.setStroke(Color.BLACK);</span>
<span class="nc" id="L1435">        Line bottomArrow = new Line();</span>
<span class="nc" id="L1436">        bottomArrow.setStrokeWidth(6);</span>
<span class="nc" id="L1437">        bottomArrow.setStroke(Color.BLACK);</span>
        // completes the arrow and fills in diamond
<span class="nc" id="L1439">        Line middleArrow = new Line();</span>
<span class="nc" id="L1440">        middleArrow.setStrokeWidth(6);</span>
<span class="nc" id="L1441">        middleArrow.setStroke(Color.BLACK);</span>
        // for filled in arrow or diamond
<span class="nc" id="L1443">        Line fillArrow = new Line();</span>
<span class="nc" id="L1444">        fillArrow.setStrokeWidth(7);</span>
<span class="nc" id="L1445">        fillArrow.setStroke(Color.BLACK);</span>
        // Set up arrow's shape
<span class="nc" id="L1447">        InvalidationListener update1 = observable -&gt; {</span>
<span class="nc" id="L1448">            double endX = line.getLine().getEndX();</span>
<span class="nc" id="L1449">            double endY = line.getLine().getEndY();</span>
<span class="nc" id="L1450">            double startX = line.getLine().getStartX();</span>
<span class="nc" id="L1451">            double startY = line.getLine().getStartY();</span>
            // end of arrow head is the end of the line
<span class="nc" id="L1453">            topArrow.setEndX(endX);</span>
<span class="nc" id="L1454">            topArrow.setEndY(endY);</span>
<span class="nc" id="L1455">            bottomArrow.setEndX(endX);</span>
<span class="nc" id="L1456">            bottomArrow.setEndY(endY);</span>
            // get arrowhead angle
<span class="nc" id="L1458">            double lengthM = 25 / Math.hypot(startX - endX, startY - endY);</span>
<span class="nc" id="L1459">            double widthM = 9 / Math.hypot(startX - endX, startY - endY);</span>
            // arrow shape regarding direction of main line
<span class="nc" id="L1461">            double dirX = (startX - endX) * lengthM;</span>
<span class="nc" id="L1462">            double dirY = (startY - endY) * lengthM;</span>
            // arrow shape regarding orthogonal of main line
<span class="nc" id="L1464">            double orthX = (startX - endX) * widthM;</span>
<span class="nc" id="L1465">            double orthY = (startY - endY) * widthM;</span>
            // set proper arrow shape
<span class="nc" id="L1467">            topArrow.setStartX(endX + dirX - orthY);</span>
<span class="nc" id="L1468">            topArrow.setStartY(endY + dirY + orthX);</span>
<span class="nc" id="L1469">            bottomArrow.setStartX(endX + dirX + orthY);</span>
<span class="nc" id="L1470">            bottomArrow.setStartY(endY + dirY - orthX);</span>
<span class="nc" id="L1471">            middleArrow.setStartX(bottomArrow.getStartX() - .5);</span>
<span class="nc" id="L1472">            middleArrow.setStartY(bottomArrow.getStartY() - .5);</span>
<span class="nc" id="L1473">            middleArrow.setEndX(topArrow.getStartX() - .5);</span>
<span class="nc" id="L1474">            middleArrow.setEndY(topArrow.getStartY() - .5);</span>
<span class="nc" id="L1475">            fillArrow.setStartX(((middleArrow.getStartX() + middleArrow.getEndX()) / 2));</span>
<span class="nc" id="L1476">            fillArrow.setStartY(((middleArrow.getStartY() + middleArrow.getEndY()) / 2));</span>
<span class="nc" id="L1477">            fillArrow.setEndX(topArrow.getEndX());</span>
<span class="nc" id="L1478">            fillArrow.setEndY(topArrow.getEndY());</span>
<span class="nc" id="L1479">        };</span>
        // update to arrow shape when moving line
<span class="nc" id="L1481">        line.getLine().startXProperty().addListener(update1);</span>
<span class="nc" id="L1482">        line.getLine().startYProperty().addListener(update1);</span>
<span class="nc" id="L1483">        line.getLine().endXProperty().addListener(update1);</span>
<span class="nc" id="L1484">        line.getLine().endYProperty().addListener(update1);</span>
<span class="nc" id="L1485">        update1.invalidated(null);</span>
        // add lines to the super root to show up in gui
        // (DO NOT change these line below to an addAll call for superRoot.getChildren, the order matters)
<span class="nc" id="L1488">        superRoot.getChildren().add(1, topArrow);</span>
<span class="nc" id="L1489">        superRoot.getChildren().add(2, bottomArrow);</span>
<span class="nc" id="L1490">        superRoot.getChildren().add(3, middleArrow);</span>
<span class="nc" id="L1491">        superRoot.getChildren().add(4, fillArrow);</span>
        // add lines to array list to be manipulated(accessed or deleted)
<span class="nc" id="L1493">        ArrayList&lt;Line&gt; arrowShape = new ArrayList&lt;&gt;();</span>
<span class="nc" id="L1494">        arrowShape.add(topArrow);</span>
<span class="nc" id="L1495">        arrowShape.add(bottomArrow);</span>
<span class="nc" id="L1496">        arrowShape.add(middleArrow);</span>
<span class="nc" id="L1497">        arrowShape.add(fillArrow);</span>
<span class="nc" id="L1498">        return arrowShape;</span>
    }

    /**
     * Takes in a relationship line
     * Draws a filled in diamond shape
     * (Composition)
     *
     * @param line the relationship line
     */
    public ArrayList&lt;Line&gt; filledDiamond(RelLine line){
        // top(right) and bottom(left) arrows
<span class="nc" id="L1510">        Line topArrow = new Line();</span>
<span class="nc" id="L1511">        topArrow.setStrokeWidth(8);</span>
<span class="nc" id="L1512">        topArrow.setStroke(Color.BLACK);</span>
<span class="nc" id="L1513">        Line bottomArrow = new Line();</span>
<span class="nc" id="L1514">        bottomArrow.setStrokeWidth(8);</span>
<span class="nc" id="L1515">        bottomArrow.setStroke(Color.BLACK);</span>
        // for filled in arrow or diamond
<span class="nc" id="L1517">        Line fillArrow = new Line();</span>
<span class="nc" id="L1518">        fillArrow.setStrokeWidth(7);</span>
<span class="nc" id="L1519">        fillArrow.setStroke(Color.BLACK);</span>
        // for diamond Shape
<span class="nc" id="L1521">        Line tBackArrow = new Line();</span>
<span class="nc" id="L1522">        tBackArrow.setStrokeWidth(8);</span>
<span class="nc" id="L1523">        tBackArrow.setStroke(Color.BLACK);</span>
<span class="nc" id="L1524">        Line bBackArrow = new Line();</span>
<span class="nc" id="L1525">        bBackArrow.setStrokeWidth(8);</span>
<span class="nc" id="L1526">        bBackArrow.setStroke(Color.BLACK);</span>
        // Set up arrow's shape
<span class="nc" id="L1528">        InvalidationListener update2 = observable -&gt; {</span>
<span class="nc" id="L1529">            double startX = line.getLine().getStartX();</span>
<span class="nc" id="L1530">            double startY = line.getLine().getStartY();</span>
<span class="nc" id="L1531">            double endX = line.getLine().getEndX();</span>
<span class="nc" id="L1532">            double endY = line.getLine().getEndY();</span>
            // end of arrow head is the end of the line
<span class="nc" id="L1534">            topArrow.setEndX(endX);</span>
<span class="nc" id="L1535">            topArrow.setEndY(endY);</span>
<span class="nc" id="L1536">            bottomArrow.setEndX(endX);</span>
<span class="nc" id="L1537">            bottomArrow.setEndY(endY);</span>
            // get arrowhead angle
<span class="nc" id="L1539">            double lengthM = 20 / Math.hypot(startX - endX, startY - endY);</span>
<span class="nc" id="L1540">            double widthM = 9 / Math.hypot(startX - endX, startY - endY);</span>
            // arrow shape regarding direction of main line
<span class="nc" id="L1542">            double dirX = (startX - endX) * lengthM;</span>
<span class="nc" id="L1543">            double dirY = (startY - endY) * lengthM;</span>
            // arrow shape regarding orthogonal of main line
<span class="nc" id="L1545">            double orthX = (startX - endX) * widthM;</span>
<span class="nc" id="L1546">            double orthY = (startY - endY) * widthM;</span>
            // set proper arrow shape
<span class="nc" id="L1548">            topArrow.setStartX(endX + dirX - orthY);</span>
<span class="nc" id="L1549">            topArrow.setStartY(endY + dirY + orthX);</span>
<span class="nc" id="L1550">            bottomArrow.setStartX(endX + dirX + orthY);</span>
<span class="nc" id="L1551">            bottomArrow.setStartY(endY + dirY - orthX);</span>
<span class="nc" id="L1552">            tBackArrow.setStartX(topArrow.getStartX());</span>
<span class="nc" id="L1553">            tBackArrow.setStartY(topArrow.getStartY());</span>
<span class="nc" id="L1554">            tBackArrow.setEndX(topArrow.getStartX() + dirX + orthY);</span>
<span class="nc" id="L1555">            tBackArrow.setEndY(topArrow.getStartY() + dirY - orthX);</span>
<span class="nc" id="L1556">            bBackArrow.setStartX(bottomArrow.getStartX());</span>
<span class="nc" id="L1557">            bBackArrow.setStartY(bottomArrow.getStartY());</span>
<span class="nc" id="L1558">            bBackArrow.setEndX(bottomArrow.getStartX() + dirX - orthY);</span>
<span class="nc" id="L1559">            bBackArrow.setEndY(bottomArrow.getStartY() + dirY + orthX);</span>
<span class="nc" id="L1560">            fillArrow.setStartX(tBackArrow.getEndX());</span>
<span class="nc" id="L1561">            fillArrow.setStartY(tBackArrow.getEndY());</span>
<span class="nc" id="L1562">            fillArrow.setEndX(topArrow.getEndX());</span>
<span class="nc" id="L1563">            fillArrow.setEndY(topArrow.getEndY());</span>

<span class="nc" id="L1565">        };</span>
        // update to arrow shape when moving line
<span class="nc" id="L1567">        line.getLine().startXProperty().addListener(update2);</span>
<span class="nc" id="L1568">        line.getLine().startYProperty().addListener(update2);</span>
<span class="nc" id="L1569">        line.getLine().endXProperty().addListener(update2);</span>
<span class="nc" id="L1570">        line.getLine().endYProperty().addListener(update2);</span>
<span class="nc" id="L1571">        update2.invalidated(null);</span>
        // add lines to the super root to show up in gui
        // (DO NOT change these line below to an addAll call for superRoot.getChildren, the order matters)
<span class="nc" id="L1574">        superRoot.getChildren().add(1, topArrow);</span>
<span class="nc" id="L1575">        superRoot.getChildren().add(2, bottomArrow);</span>
<span class="nc" id="L1576">        superRoot.getChildren().add(3, fillArrow);</span>
<span class="nc" id="L1577">        superRoot.getChildren().add(4, tBackArrow);</span>
<span class="nc" id="L1578">        superRoot.getChildren().add(5, bBackArrow);</span>
        // add lines to array list to be manipulated(accessed or deleted)
<span class="nc" id="L1580">        ArrayList&lt;Line&gt; arrowShape = new ArrayList&lt;&gt;();</span>
<span class="nc" id="L1581">        arrowShape.add(topArrow);</span>
<span class="nc" id="L1582">        arrowShape.add(bottomArrow);</span>
<span class="nc" id="L1583">        arrowShape.add(fillArrow);</span>
<span class="nc" id="L1584">        arrowShape.add(tBackArrow);</span>
<span class="nc" id="L1585">        arrowShape.add(bBackArrow);</span>
<span class="nc" id="L1586">        return arrowShape;</span>
    }

    /**
     * Takes in a relationship line
     * Draws a filled in diamond shape
     * (Aggregation)
     *
     * @param line the relationship line
     */
    public ArrayList&lt;Line&gt; emptyDiamond(RelLine line){
        // top(right) and bottom(left) arrows
<span class="nc" id="L1598">        Line topArrow = new Line();</span>
<span class="nc" id="L1599">        topArrow.setStrokeWidth(6);</span>
<span class="nc" id="L1600">        topArrow.setStroke(Color.BLACK);</span>
<span class="nc" id="L1601">        Line bottomArrow = new Line();</span>
<span class="nc" id="L1602">        bottomArrow.setStrokeWidth(6);</span>
<span class="nc" id="L1603">        bottomArrow.setStroke(Color.BLACK);</span>
        // for diamond Shape
<span class="nc" id="L1605">        Line tBackArrow = new Line();</span>
<span class="nc" id="L1606">        tBackArrow.setStrokeWidth(6);</span>
<span class="nc" id="L1607">        tBackArrow.setStroke(Color.BLACK);</span>
<span class="nc" id="L1608">        Line bBackArrow = new Line();</span>
<span class="nc" id="L1609">        bBackArrow.setStrokeWidth(6);</span>
<span class="nc" id="L1610">        bBackArrow.setStroke(Color.BLACK);</span>
        // Set up arrow's shape
<span class="nc" id="L1612">        InvalidationListener update3 = observable -&gt; {</span>
<span class="nc" id="L1613">            double endX = line.getLine().getEndX();</span>
<span class="nc" id="L1614">            double endY = line.getLine().getEndY();</span>
<span class="nc" id="L1615">            double startX = line.getLine().getStartX();</span>
<span class="nc" id="L1616">            double startY = line.getLine().getStartY();</span>
            // end of arrow head is the end of the line
<span class="nc" id="L1618">            topArrow.setEndX(endX);</span>
<span class="nc" id="L1619">            topArrow.setEndY(endY);</span>
<span class="nc" id="L1620">            bottomArrow.setEndX(endX);</span>
<span class="nc" id="L1621">            bottomArrow.setEndY(endY);</span>
            // get arrowhead angle
<span class="nc" id="L1623">            double lengthM = 25 / Math.hypot(startX - endX, startY - endY);</span>
<span class="nc" id="L1624">            double widthM = 11 / Math.hypot(startX - endX, startY - endY);</span>
            // arrow shape regarding direction of main line
<span class="nc" id="L1626">            double dirX = (startX - endX) * lengthM;</span>
<span class="nc" id="L1627">            double dirY = (startY - endY) * lengthM;</span>
            // arrow shape regarding orthogonal of main line
<span class="nc" id="L1629">            double orthX = (startX - endX) * widthM;</span>
<span class="nc" id="L1630">            double orthY = (startY - endY) * widthM;</span>
            // set proper arrow shape
<span class="nc" id="L1632">            topArrow.setStartX(endX + dirX - orthY);</span>
<span class="nc" id="L1633">            topArrow.setStartY(endY + dirY + orthX);</span>
<span class="nc" id="L1634">            bottomArrow.setStartX(endX + dirX + orthY);</span>
<span class="nc" id="L1635">            bottomArrow.setStartY(endY + dirY - orthX);</span>
<span class="nc" id="L1636">            tBackArrow.setStartX(topArrow.getStartX());</span>
<span class="nc" id="L1637">            tBackArrow.setStartY(topArrow.getStartY());</span>
<span class="nc" id="L1638">            tBackArrow.setEndX(topArrow.getStartX() + dirX + orthY);</span>
<span class="nc" id="L1639">            tBackArrow.setEndY(topArrow.getStartY() + dirY - orthX);</span>
<span class="nc" id="L1640">            bBackArrow.setStartX(bottomArrow.getStartX());</span>
<span class="nc" id="L1641">            bBackArrow.setStartY(bottomArrow.getStartY());</span>
<span class="nc" id="L1642">            bBackArrow.setEndX(bottomArrow.getStartX() + dirX - orthY);</span>
<span class="nc" id="L1643">            bBackArrow.setEndY(bottomArrow.getStartY() + dirY + orthX);</span>
<span class="nc" id="L1644">        };</span>
        // bindings for replacement line to invisible original line
<span class="nc" id="L1646">        DoubleBinding startXBind = line.getCBSrc().getClassPane().translateXProperty().add(line.getCBSrc()</span>
<span class="nc" id="L1647">                .getClassPane().widthProperty().divide(2));</span>
<span class="nc" id="L1648">        DoubleBinding startYBind = line.getCBSrc().getClassPane().translateYProperty().add(line.getCBSrc()</span>
<span class="nc" id="L1649">                .getClassPane().heightProperty().divide(2));</span>
<span class="nc" id="L1650">        DoubleBinding endXBind = tBackArrow.translateXProperty().add(tBackArrow.endXProperty());</span>
<span class="nc" id="L1651">        DoubleBinding endYBind = tBackArrow.translateYProperty().add(tBackArrow.endYProperty());</span>
        // replacement line for real line, set bindings
<span class="nc" id="L1653">        Line rLine = new Line();</span>
<span class="nc" id="L1654">        rLine.setStroke(Color.BLACK);</span>
<span class="nc" id="L1655">        rLine.setStrokeWidth(9.5);</span>
<span class="nc" id="L1656">        rLine.startXProperty().bind(startXBind);</span>
<span class="nc" id="L1657">        rLine.startYProperty().bind(startYBind);</span>
<span class="nc" id="L1658">        rLine.endXProperty().bind(endXBind);</span>
<span class="nc" id="L1659">        rLine.endYProperty().bind(endYBind);</span>
        // update to arrow shape when moving line
<span class="nc" id="L1661">        line.getLine().startXProperty().addListener(update3);</span>
<span class="nc" id="L1662">        line.getLine().startYProperty().addListener(update3);</span>
<span class="nc" id="L1663">        line.getLine().endXProperty().addListener(update3);</span>
<span class="nc" id="L1664">        line.getLine().endYProperty().addListener(update3);</span>
        //same update listener for replacement lines
<span class="nc" id="L1666">        rLine.startXProperty().addListener(update3);</span>
<span class="nc" id="L1667">        rLine.startYProperty().addListener(update3);</span>
<span class="nc" id="L1668">        rLine.endXProperty().addListener(update3);</span>
<span class="nc" id="L1669">        rLine.endYProperty().addListener(update3);</span>
<span class="nc" id="L1670">        update3.invalidated(null);</span>
        // add lines to the super root to show up in gui
        // (DO NOT change these line below to an addAll call for superRoot.getChildren, the order matters)
<span class="nc" id="L1673">        superRoot.getChildren().add(1, topArrow);</span>
<span class="nc" id="L1674">        superRoot.getChildren().add(2, bottomArrow);</span>
<span class="nc" id="L1675">        superRoot.getChildren().add(3, tBackArrow);</span>
<span class="nc" id="L1676">        superRoot.getChildren().add(4, bBackArrow);</span>
<span class="nc" id="L1677">        superRoot.getChildren().add(5, rLine);</span>
        // add lines to array list to be manipulated(accessed or deleted)
<span class="nc" id="L1679">        ArrayList&lt;Line&gt; arrowShape = new ArrayList&lt;&gt;();</span>
<span class="nc" id="L1680">        arrowShape.add(topArrow);</span>
<span class="nc" id="L1681">        arrowShape.add(bottomArrow);</span>
<span class="nc" id="L1682">        arrowShape.add(tBackArrow);</span>
<span class="nc" id="L1683">        arrowShape.add(bBackArrow);</span>
<span class="nc" id="L1684">        arrowShape.add(rLine);</span>
<span class="nc" id="L1685">        return arrowShape;</span>
    }

    /**
     * Takes in the source and destination class box objects
     * finds and returns the relationship line corresponding to
     * the src and dest
     *
     * @param src the source class box object
     * @param dest the destination class box object
     * @return the relationship line
     */
    public RelLine findRelLine(ClassBox src, ClassBox dest){
<span class="nc bnc" id="L1698" title="All 2 branches missed.">        for(RelLine line : lineList){</span>
<span class="nc bnc" id="L1699" title="All 2 branches missed.">            if(line.getCBSrc().equals(src)) {</span>
<span class="nc bnc" id="L1700" title="All 2 branches missed.">                if (line.getCBDest().equals(dest)) {</span>
<span class="nc" id="L1701">                    return line;</span>
                }
            }
<span class="nc" id="L1704">        }</span>
<span class="nc" id="L1705">        return null;</span>
    }

    /**
     * Takes in a relationship line
     * returns the arrow shape (list of lines)
     *
     * @param line the relationship line
     * @return the arrow shape
     */
    public ArrayList&lt;Line&gt; findArrow(RelLine line){
<span class="nc bnc" id="L1716" title="All 2 branches missed.">        for(ArrayList&lt;Line&gt; arrows : arrowList){</span>
<span class="nc bnc" id="L1717" title="All 2 branches missed.">            for(Line arrow : arrows){</span>
<span class="nc bnc" id="L1718" title="All 2 branches missed.">                if(arrow.getEndX() == line.getLine().getEndX()){</span>
<span class="nc" id="L1719">                    return arrows;</span>
                }
<span class="nc" id="L1721">            }</span>
<span class="nc" id="L1722">        }</span>
<span class="nc" id="L1723">        return null;</span>
    }

    /**
     * Takes in a class name from the classlist, searches through the
     * class box list for a class box object with the same name as className
     *
     * @param className the name of the class
     * @return the classbox object with the same class name
     */
    public ClassBox findClassBox(String className){
<span class="nc" id="L1734">        ClassBox classbox = null;</span>
<span class="nc bnc" id="L1735" title="All 2 branches missed.">        for(ClassBox box : classBoxList) {</span>
<span class="nc bnc" id="L1736" title="All 2 branches missed.">            if (box.getClassBoxName().equals(className)) {</span>
<span class="nc" id="L1737">                classbox = box;</span>
            }
<span class="nc" id="L1739">        }</span>
<span class="nc" id="L1740">        return classbox;</span>
    }

    /**
     * Takes in a class box name(class name) and removes it from the super root
     * and class box list(removes the class from the view)
     *
     * @param classBoxName the name of the class box(name of class)
     */
    public void deleteClassBox (String classBoxName){
<span class="nc bnc" id="L1750" title="All 2 branches missed.">        for (ClassBox cbObj : classBoxList) {</span>
<span class="nc bnc" id="L1751" title="All 2 branches missed.">            if(cbObj.getClassBoxName().equals(classBoxName)) {</span>
<span class="nc" id="L1752">                superRoot.getChildren().remove(cbObj.getClassPane());</span>
            }
<span class="nc" id="L1754">        }</span>
<span class="nc" id="L1755">        classBoxList.remove(findClassBox(classBoxName));</span>
<span class="nc" id="L1756">    }</span>

    /**
     * Takes in a source class box object and a destination class
     * box object, searches through the list of relationship lines
     * and deletes the line that matches the source and destination
     *
     * @param src the source class box object
     * @param dest the destination class box object
     */
    public void deleteRelLine (ClassBox src, ClassBox dest){
<span class="nc bnc" id="L1767" title="All 2 branches missed.">        for(ArrayList&lt;Line&gt; arrows : arrowList){</span>
<span class="nc bnc" id="L1768" title="All 2 branches missed.">            if(arrows.equals(findArrow(findRelLine(src, dest)))) {</span>
<span class="nc bnc" id="L1769" title="All 2 branches missed.">                for (Line arrow : arrows) {</span>
<span class="nc" id="L1770">                    superRoot.getChildren().remove(arrow);</span>
<span class="nc" id="L1771">                }</span>
<span class="nc" id="L1772">                superRoot.getChildren().remove(arrows);</span>
<span class="nc" id="L1773">                arrowList.remove(arrows);</span>
<span class="nc" id="L1774">                break;</span>
            }
<span class="nc" id="L1776">        }</span>
<span class="nc" id="L1777">        superRoot.getChildren().remove(findRelLine(src, dest).getLine());</span>
<span class="nc" id="L1778">        lineList.remove(findRelLine(src, dest).getLine());</span>
<span class="nc" id="L1779">        lineList.remove(findRelLine(src, dest));</span>
<span class="nc" id="L1780">    }</span>

    /**
     * Takes in a relLine and a relType
     * Styles the relationship line depending on the relationship type
     *
     * @param relType the relationship type
     * @return the type of arrowhead shape (arrow or diamond, filled or empty)
     */
    public String relLineStyle(String relType){
<span class="nc bnc" id="L1790" title="All 5 branches missed.">        switch (relType) {</span>
            case &quot;aggregation&quot; -&gt; {
<span class="nc" id="L1792">                return &quot;ED&quot;; // empty diamond</span>
            }
            case &quot;composition&quot; -&gt; {
<span class="nc" id="L1795">                return &quot;FD&quot;; // filled in diamond</span>
            }
            case &quot;inheritance&quot; -&gt; {
<span class="nc" id="L1798">                return &quot;FA&quot;; // filled in arrow</span>
            }
            case &quot;realization&quot; -&gt; {
<span class="nc" id="L1801">                return &quot;EA&quot;; // empty arrow</span>
            }
        }
<span class="nc" id="L1804">        return null;</span>
    }

    private void updateMenus() {
        // get the list of items in the edit menu object
<span class="nc" id="L1809">        ObservableList&lt;MenuItem&gt; editList = menuBar.getMenus().get(1).getItems();</span>
        // get the add menu object
<span class="nc" id="L1811">        Menu add = (Menu) editList.get(0);</span>
        // get the add attribute menu object
<span class="nc" id="L1813">        Menu addAttribute = (Menu) add.getItems().get(1);</span>
        // get the delete menu object
<span class="nc" id="L1815">        Menu delete = (Menu) editList.get(1);</span>
        // get the delete attribute menu object
<span class="nc" id="L1817">        Menu deleteAttribute = (Menu) delete.getItems().get(1);</span>
        // get the rename menu object
<span class="nc" id="L1819">        Menu rename = (Menu) editList.get(2);</span>
        // get the rename attribute menu object
<span class="nc" id="L1821">        Menu renameAttribute = (Menu) rename.getItems().get(1);</span>
        // get the change menu object
<span class="nc" id="L1823">        Menu change = (Menu) editList.get(3);</span>

        // enable/disable
<span class="nc bnc" id="L1826" title="All 2 branches missed.">        if (!this.controller.getClassList().isEmpty()) {</span>
            // enable the add field menu item
<span class="nc" id="L1828">            addAttribute.getItems().get(0).setDisable(false);</span>
            // enable the add method menu item
<span class="nc" id="L1830">            addAttribute.getItems().get(1).setDisable(false);</span>
            // enable add relationship
<span class="nc" id="L1832">            add.getItems().get(2).setDisable(false);</span>
            // enable the delete class menu item
<span class="nc" id="L1834">            delete.getItems().get(0).setDisable(false);</span>
            // enable the rename class menu item
<span class="nc" id="L1836">            rename.getItems().get(0).setDisable(false);</span>

<span class="nc" id="L1838">            boolean fieldExists = false;</span>
<span class="nc" id="L1839">            boolean methodExists = false;</span>
<span class="nc" id="L1840">            boolean paramExists = false;</span>
            // check every object and see if at least one of them has either a field or method
<span class="nc bnc" id="L1842" title="All 2 branches missed.">            for (UMLClass classObj : this.controller.getClassList()) {</span>
<span class="nc bnc" id="L1843" title="All 2 branches missed.">                if (!classObj.getFieldList().isEmpty()) {</span>
<span class="nc" id="L1844">                    fieldExists = true;</span>
                }
<span class="nc bnc" id="L1846" title="All 2 branches missed.">                if (!classObj.getMethodList().isEmpty()) {</span>
<span class="nc" id="L1847">                    methodExists = true;</span>
<span class="nc bnc" id="L1848" title="All 2 branches missed.">                    for (Method methObj : classObj.getMethodList()) {</span>
<span class="nc bnc" id="L1849" title="All 2 branches missed.">                        if (!methObj.getParamList().isEmpty()) {</span>
<span class="nc" id="L1850">                            paramExists = true;</span>
                        }
<span class="nc" id="L1852">                    }</span>
                }
<span class="nc" id="L1854">            }</span>
            // if there is at least one field in the list, enable the menu items
            // otherwise, disable them
<span class="nc bnc" id="L1857" title="All 2 branches missed.">            if (fieldExists) {</span>
<span class="nc" id="L1858">                deleteAttribute.getItems().get(0).setDisable(false);</span>
<span class="nc" id="L1859">                renameAttribute.getItems().get(0).setDisable(false);</span>
            } else {
<span class="nc" id="L1861">                deleteAttribute.getItems().get(0).setDisable(true);</span>
<span class="nc" id="L1862">                renameAttribute.getItems().get(0).setDisable(true);</span>
            }
            // if there is at least one method in the list, enable the menu items
            // otherwise, disable them
<span class="nc bnc" id="L1866" title="All 2 branches missed.">            if (methodExists) {</span>
<span class="nc" id="L1867">                deleteAttribute.getItems().get(1).setDisable(false);</span>
<span class="nc" id="L1868">                deleteAttribute.getItems().get(1).setDisable(false);</span>
<span class="nc" id="L1869">                renameAttribute.getItems().get(1).setDisable(false);</span>
<span class="nc" id="L1870">                add.getItems().get(3).setDisable(false);</span>
            } else {
<span class="nc" id="L1872">                deleteAttribute.getItems().get(1).setDisable(true);</span>
<span class="nc" id="L1873">                renameAttribute.getItems().get(1).setDisable(true);</span>
<span class="nc" id="L1874">                add.getItems().get(3).setDisable(true);</span>
            }
            // if there is at least one parameter in the list, enable the menu items
            // otherwise, disable them
<span class="nc bnc" id="L1878" title="All 2 branches missed.">            if (paramExists) {</span>
<span class="nc" id="L1879">                delete.getItems().get(3).setDisable(false);</span>
<span class="nc" id="L1880">                change.getItems().get(0).setDisable(false);</span>
            } else {
<span class="nc" id="L1882">                delete.getItems().get(3).setDisable(true);</span>
<span class="nc" id="L1883">                change.getItems().get(0).setDisable(true);</span>
            }
            // if there are at least one relationship in the relationship list, enable the menu items
            // otherwise, disable them
<span class="nc bnc" id="L1887" title="All 2 branches missed.">            if (!this.controller.getRelationshipList().isEmpty()) {</span>
<span class="nc" id="L1888">                delete.getItems().get(2).setDisable(false);</span>
<span class="nc" id="L1889">                change.getItems().get(1).setDisable(false);</span>
            } else {
<span class="nc" id="L1891">                delete.getItems().get(2).setDisable(true);</span>
<span class="nc" id="L1892">                change.getItems().get(1).setDisable(true);</span>
            }
<span class="nc" id="L1894">        } else {</span>
            // disable all the menu items
<span class="nc" id="L1896">            addAttribute.getItems().get(0).setDisable(true);</span>
<span class="nc" id="L1897">            addAttribute.getItems().get(1).setDisable(true);</span>
<span class="nc" id="L1898">            add.getItems().get(2).setDisable(true);</span>
<span class="nc" id="L1899">            delete.getItems().get(0).setDisable(true);</span>
<span class="nc" id="L1900">            rename.getItems().get(0).setDisable(true);</span>
<span class="nc" id="L1901">            deleteAttribute.getItems().get(0).setDisable(true);</span>
<span class="nc" id="L1902">            renameAttribute.getItems().get(0).setDisable(true);</span>
<span class="nc" id="L1903">            deleteAttribute.getItems().get(1).setDisable(true);</span>
<span class="nc" id="L1904">            renameAttribute.getItems().get(1).setDisable(true);</span>
<span class="nc" id="L1905">            add.getItems().get(3).setDisable(true);</span>
<span class="nc" id="L1906">            change.getItems().get(0).setDisable(true);</span>
        }
<span class="nc" id="L1908">    }</span>

    /**
     * Takes in many parameters from the window and gives it standardized formatting,
     * then finalizes and shows it
     *
     * @param stage the stage of the window
     * @param root the group of objects in the window
     * @param pane the pane of objects
     * @param title the title of the window
     * @param height the height of the window
     * @param width the width of the window
     */
    private void finalizeWindow(Stage stage, Group root, GridPane pane, String title, int height, int width) {
<span class="nc" id="L1922">        stage.initModality(Modality.APPLICATION_MODAL);</span>
<span class="nc" id="L1923">        pane.setHgap(5);</span>
<span class="nc" id="L1924">        pane.setVgap(10);</span>
<span class="nc" id="L1925">        pane.setPadding(new Insets(10, 10, 10, 10));</span>
<span class="nc" id="L1926">        stage.setTitle(title);</span>
<span class="nc" id="L1927">        stage.setWidth(width);</span>
<span class="nc" id="L1928">        stage.setHeight(height);</span>
<span class="nc" id="L1929">        stage.setResizable(false);</span>
<span class="nc" id="L1930">        root.getChildren().add(pane);</span>
<span class="nc" id="L1931">        Scene window = new Scene(root);</span>
<span class="nc" id="L1932">        stage.setScene(window);</span>
<span class="nc" id="L1933">        stage.show();</span>
<span class="nc" id="L1934">    }</span>

    /**
     * Adds a key value pair to the coordinate map, where the value is a list of the x and y
     *
     * @param className the key, the name of the class
     * @param X the x value for the class box
     * @param Y the y value for the class box
     */
    public void addToCoordinateMap(String className, Double X, Double Y) {
<span class="nc" id="L1944">        List&lt;Double&gt; coordinateList = new ArrayList&lt;Double&gt;();</span>
<span class="nc" id="L1945">        coordinateList.add(X);</span>
<span class="nc" id="L1946">        coordinateList.add(Y);</span>
<span class="nc" id="L1947">        this.model.getCoordinateMap().put(className, coordinateList);</span>
<span class="nc" id="L1948">    }</span>

    public static void main(String[] args) {
<span class="nc" id="L1951">        launch(args);</span>
<span class="nc" id="L1952">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span></div></body></html>